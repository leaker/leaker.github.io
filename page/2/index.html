
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>逃避虽然可耻但有用</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="leaker">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="逃避虽然可耻但有用">
<meta property="og:url" content="https://www.leelib.com/page/2/index.html">
<meta property="og:site_name" content="逃避虽然可耻但有用">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="leaker">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="/atom.xml" title="逃避虽然可耻但有用" type="application/atom+xml">
    
    
    <link rel="icon" href="/favicon.ico">
    
    
    <link rel="stylesheet" href="/css/style.css">
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.webp" alt="逃避虽然可耻但有用" title="逃避虽然可耻但有用"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="逃避虽然可耻但有用">逃避虽然可耻但有用</a></h1>
				<h2 class="blog-motto">少壮不努力，一生在内地</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives/index.html">归档</a></li>
					
						<li><a href="/about/index.html">关于</a></li>
					
						<li><a href="/disappear/index.html">消失</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.leelib.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/09/pkgmgr-install-telnet.html" title="使用pkgmgr安装telnet客户端" itemprop="url">使用pkgmgr安装telnet客户端</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2016-05-09T11:04:44.000Z" itemprop="datePublished"> 发表于 2016-05-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在 Windows Vista 以上的操作系统中可以使用pkgmgr对Windows功能的快捷安装<br>比如想要安装 <em>telnet客户端</em> 时，只需在控制台里面键入以下命令并回车：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pkgmgr /iu:<span class="token string">"TelnetClient"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>等几秒钟后 telnet 命令就可以使用了<br>就这么简单 :)</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/summarys/index.html">summarys</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/20/adt-add-library-bug.html" title="Eclipse-ADT在Windows下添加library的BUG" itemprop="url">Eclipse-ADT在Windows下添加library的BUG</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2016-04-20T18:35:35.000Z" itemprop="datePublished"> 发表于 2016-04-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="问题出现"><a href="#问题出现" class="headerlink" title="问题出现"></a>问题出现</h1><p>今天在Windows里使用 Cocos-Quick 创建的项目在使用ADT往Android里面部署的时候遇到了下面的问题</p>
<img src="/images/20160420/adt_add_library_bug.webp" class="">

<p>出现上图的情况是这样的操作步骤：</p>
<ol>
<li>添加 D:\Tools\Quick-Cocos2dx-Community\cocos\platform\android\java 到 Library 引用里</li>
<li>点击 OK</li>
<li>重新打开这个配置界面</li>
</ol>
<h1 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h1><p>测试了许久后，无意间发现有次选错了路径后Library正常了</p>
<blockquote>
<p>当时我选择的 Quick 是 ** F:\Quick-Cocos2dx-Community **<br>选择的项目目录是 ** F:\Code\Cocos\QuickHello **</p>
</blockquote>
<p>终于发现了解决这个BUG的办法：*** 将项目和想要引用的Library放在同一个分区内 ***<br>遂将项目和 Quick 放到同一个分区内后问题解决，效果如下：</p>
<img src="/images/20160420/adt_add_library_bug_ok.webp" class="">

<p>引起这个错误的原因是：*** Eclipse 本身并不是给Windows 这种多分区系统定制的，本身是用来给 MAC 或者 Linux 这种以目录为结构的系统使用的 ***</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/programing/index.html">programing</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/01/21/git.html" title="Git的常用命令收集" itemprop="url">Git的常用命令收集</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2016-01-21T23:43:59.000Z" itemprop="datePublished"> 发表于 2016-01-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 拉取最新的代码</span>
<span class="token function">git</span> fetch --all
<span class="token comment"># 恢复到最后一次提交，放弃本地所有修改</span>
<span class="token function">git</span> reset --hard

<span class="token comment"># 列出所有设置</span>
<span class="token function">git</span> config -l

<span class="token comment"># 抛弃对文件的修改</span>
<span class="token function">git</span> co  -- <span class="token operator">&lt;</span>filename<span class="token operator">></span>
<span class="token comment"># 抛弃对目录的修改</span>
<span class="token function">git</span> co <span class="token builtin class-name">.</span>

<span class="token comment"># 从版本库中删除文件</span>
<span class="token function">git</span> <span class="token function">rm</span> <span class="token operator">&lt;</span>filename<span class="token operator">></span>

<span class="token comment"># 比较差异</span>
<span class="token function">git</span> <span class="token function">diff</span>

<span class="token comment"># 查看提交历史</span>
<span class="token function">git</span> log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>本篇文章后续不定期更新</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/git/index.html">git</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/12/13/enable-shared-from-this.html" title="类 enable_shared_from_this 的经验总结" itemprop="url">类 enable_shared_from_this 的经验总结</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-12-13T23:32:07.000Z" itemprop="datePublished"> 发表于 2015-12-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="不能再构造函数内使用-shared-from-this-函数"><a href="#不能再构造函数内使用-shared-from-this-函数" class="headerlink" title="不能再构造函数内使用 shared_from_this() 函数"></a>不能再构造函数内使用 shared_from_this() 函数</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">class_a</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">enable_shared_from_this</span><span class="token operator">&lt;</span><span class="token class-name">class_a</span><span class="token operator">></span></span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">class_a</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">auto</span> <span class="token function">self</span><span class="token punctuation">(</span><span class="token function">shared_from_this</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 这里会报 bad_weak_ptr 错误</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="子类无法重复继承"><a href="#子类无法重复继承" class="headerlink" title="子类无法重复继承"></a>子类无法重复继承</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">class_a</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">enable_shared_from_this</span><span class="token operator">&lt;</span><span class="token class-name">class_a</span><span class="token operator">></span></span>
<span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">class_b</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">class_a</span><span class="token punctuation">,</span> <span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">enable_shared_from_this</span><span class="token operator">&lt;</span><span class="token class-name">class_a</span><span class="token operator">></span></span>
<span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这段代码将无法通过编译。<br>如果想返回子类的 shared_from_this 指针，则可以进行如下操作</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">class_a</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">enable_shared_from_this</span><span class="token operator">&lt;</span><span class="token class-name">class_a</span><span class="token operator">></span></span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">class_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 为了确保 dynamic_pointer_cast 可以工作，需要父类拥有虚函数。</span>
    <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">class_b</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">class_a</span></span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>class_b<span class="token operator">></span> <span class="token function">shared_from_this</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">dynamic_pointer_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>class_b<span class="token operator">></span></span></span><span class="token punctuation">(</span>class_a<span class="token double-colon punctuation">::</span><span class="token function">shared_from_this</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>通常来说如果定义一个类时，如果这个类可能被继承使用时，将这个类的析构函数定义为虚函数来确保析构的调用顺序</strong></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/programing/index.html">programing</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/c/index.html">c++</a><a href="/tags/enable-shared-from-this/index.html">enable_shared_from_this</a><a href="/tags/shared-ptr/index.html">shared_ptr</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/09/16/vs2013-command-prompt-here.html" title="Win10里添加目录右键菜单 VS2013 Command Prompt Here" itemprop="url">Win10里添加目录右键菜单 VS2013 Command Prompt Here</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-09-16T04:08:21.000Z" itemprop="datePublished"> 发表于 2015-09-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>我有时需要在命令行里对某个VS项目目录进行编译或部署等操作，总是需要以下步骤：</p>
<ol>
<li>打开VS的Command Prompt</li>
<li>进入该项目目录</li>
<li>进行编译操作</li>
</ol>
<p>个人觉得这样太浪费时间，于是萌生了添加类似 <strong>Command Here</strong> 右键菜单的想法。<br>办法很简单，在注册表添加相关项就可以了</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="Windows7-添加方法"><a href="#Windows7-添加方法" class="headerlink" title="Windows7 添加方法"></a>Windows7 添加方法</h2><p>将以下内容修改到自己对应VS目录后以文本形式保存到 VS2013-Command-Prompt-Here-win7.reg 文件，然后双击导入即可</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">Windows Registry Editor Version 5.00

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\VS2013 Command Prompt Here</span><span class="token punctuation">]</span></span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\VS2013 Command Prompt Here\command</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">@</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">cmd.exe /s /k pushd \"%1\" &amp; \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\" x86</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Windows10-添加方法"><a href="#Windows10-添加方法" class="headerlink" title="Windows10 添加方法"></a>Windows10 添加方法</h2><p>将以下内容修改到自己对应VS目录后以文本形式保存到 VS2013-Command-Prompt-Here-win10.reg 文件，然后双击导入即可</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">Windows Registry Editor Version 5.00

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">HKEY_CLASSES_ROOT\Directory\Background\shell\VS2013 Command Prompt Here</span><span class="token punctuation">]</span></span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">HKEY_CLASSES_ROOT\Directory\Background\shell\VS2013 Command Prompt Here\command</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">@</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">cmd.exe /s /k pushd \"%V\" &amp; \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\" x86</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="为什么区分Windows版本"><a href="#为什么区分Windows版本" class="headerlink" title="为什么区分Windows版本"></a>为什么区分Windows版本</h1><p>因为对于Windows来说传参的方式有所改变<br><strong>pushd %1</strong> 是用于Windows7的<br><strong>pushd %V</strong> 是用于Windows10的</p>
<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>for Windows7: <a href="/files/regfiles/VS2013-Command-Prompt-Here-win7.reg">VS2013-Command-Prompt-Here-win7.reg</a><br>for Windows10: <a href="/files/regfiles/VS2013-Command-Prompt-Here-win10.reg">VS2013-Command-Prompt-Here-win10.reg</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/summarys/index.html">summarys</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/VS2013/index.html">VS2013</a><a href="/tags/Windows10/index.html">Windows10</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/09/14/vs2013-build-openssl-static.html" title="VS2013静态编译openssl批处理" itemprop="url">VS2013静态编译openssl批处理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-09-14T12:26:46.000Z" itemprop="datePublished"> 发表于 2015-09-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="打开-Visual-Studio-2013-Command-Prompt"><a href="#打开-Visual-Studio-2013-Command-Prompt" class="headerlink" title="打开 Visual Studio 2013 Command Prompt"></a>打开 Visual Studio 2013 Command Prompt</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">wget</span> http://www.nasm.us/pub/nasm/releasebuilds/2.11.08/win32/nasm-2.11.08-win32.zip
<span class="token function">unzip</span> nasm-2.11.08-win32.zip -d C:/nasm
<span class="token builtin class-name">set</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>%<span class="token environment constant">PATH</span>%<span class="token punctuation">;</span>C:/nasm/
<span class="token function">wget</span> https://www.openssl.org/source/openssl-1.0.2d.tar.gz
<span class="token function">tar</span> xzf openssl-1.0.2d.tar.gz
<span class="token builtin class-name">cd</span> openssl-1.0.2d
perl configure VC-WIN32 --prefix<span class="token operator">=</span>C:/openssl
ms<span class="token punctuation">\</span>do_nasm
nmake -f ms<span class="token punctuation">\</span>nt.mak
nmake -f ms<span class="token punctuation">\</span>nt.mak <span class="token function">install</span>
<span class="token builtin class-name">echo</span> <span class="token string">"build successed."</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这样编译不会产生 <strong>error A2070:invalid instruction operands</strong> 这个错误</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/programing/index.html">programing</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/nasm/index.html">nasm</a><a href="/tags/openssl/index.html">openssl</a><a href="/tags/A2070/index.html">A2070</a><a href="/tags/nmake/index.html">nmake</a><a href="/tags/perl/index.html">perl</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/05/fun-battle-net-client-error.html" title="好玩的暴雪战网错误提示" itemprop="url">好玩的暴雪战网错误提示</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-08-05T22:08:24.000Z" itemprop="datePublished"> 发表于 2015-08-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <img src="/images/20150805/battle-net-error.webp" class="">

<p>可能是网络或者其他原因引起的。但没想到暴雪竟然会萌萌的掀桌子 0.0///</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/interesting/index.html">interesting</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/02/09/fix-std-max-error.html" title="VS里std::max和max宏混淆问题的解决方案" itemprop="url">VS里std::max和max宏混淆问题的解决方案</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-02-09T11:27:16.000Z" itemprop="datePublished"> 发表于 2015-02-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>有时,把旧项目转换成新版本项目时,旧版本项目里使用的 <strong>max</strong> 和 <strong>min</strong> 宏无法在新版本中正常编译.</p>
<p>原因是: 新版本内有了新的函数 <strong>std::max</strong> 和 <strong>std::min</strong> 函数来实现这一功能</p>
<h4 id="这时可以尝试使用如下方案解决"><a href="#这时可以尝试使用如下方案解决" class="headerlink" title="这时可以尝试使用如下方案解决:"></a>这时可以尝试使用如下方案解决:</h4><ol>
<li>包含algorithm文件<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li>明确使用 <strong>std::max(a,b)</strong> 而非 <strong>max(a,b)</strong></li>
<li>定义宏 NOMINMAX<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NOMINMAX</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/programing/index.html">programing</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/algorithm/index.html">algorithm</a><a href="/tags/max/index.html">max</a><a href="/tags/min/index.html">min</a><a href="/tags/std/index.html">std</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/16/windows-dll-freelibrary-self.html" title="Windows下的DLL卸载本身模块的方法" itemprop="url">Windows下的DLL卸载本身模块的方法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-01-16T01:35:37.000Z" itemprop="datePublished"> 发表于 2015-01-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在 Windows 里 DLL 卸载自身模块是无法通过字节调用 FreeLibrary 自己来实现的。</p>
<h2 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h2><blockquote>
<p>在当前线程中调用 FreeLibrary 后，当前模块就会立即被释放掉，而当前线程还没有运行结束。所以程序就运行到了一块不可访问的内存里，产生异常从而导致程序崩溃。</p>
</blockquote>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><blockquote>
<p>Windows 里面 提供了一条可以用来释放自身模块的函数 <strong>FreeLibraryAndExitThread</strong> 可以释放自身。</p>
</blockquote>
<p>函数</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">VOID WINAPI <span class="token function">FreeLibraryAndExitThread</span><span class="token punctuation">(</span>_In_ HMODULE hLibModule<span class="token punctuation">,</span> _In_ DWORD dwExitCode<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/programing/index.html">programing</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/windows/index.html">windows</a><a href="/tags/dll/index.html">dll</a><a href="/tags/FreeLibrary/index.html">FreeLibrary</a><a href="/tags/FreeLibraryAndExitThread/index.html">FreeLibraryAndExitThread</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/06/linux-auth-log.html" title="Linux里面查看登录日志，并统计次数和排序，查看尝试破解密码的IP" itemprop="url">Linux里面查看登录日志，并统计次数和排序，查看尝试破解密码的IP</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about/index.html" title="leaker" target="_blank" itemprop="author">leaker</a>
		
  <p class="article-time">
    <time datetime="2015-01-06T13:42:53.000Z" itemprop="datePublished"> 发表于 2015-01-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>仅需一条命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">grep</span> <span class="token string">"Failed password for root"</span> /var/log/secure <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $11&#125;'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -nr <span class="token operator">|</span> <span class="token function">more</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>结果类似下面这样：</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">4377 103.41.124.18
4368 103.41.124.65
3900 62.210.178.226
2214 103.41.124.33
 409 62.210.142.105
 404 115.231.222.45
 152 122.225.97.91
  95 122.225.109.205
  81 109.195.69.233
  42 74.52.105.154
  21 87.106.184.62
  21 87.106.1.211
  21 82.165.154.23
  21 69.64.64.62
  21 67.226.156.239
  21 61.40.192.52
  21 60.213.190.98
  21 27.251.179.130
  21 222.77.190.33
  21 211.172.219.251
  21 210.249.105.10
  15 220.194.46.36
  12 203.184.128.106
   1 60.190.71.52
   1 193.104.41.58<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这样我们就可以很清楚的了解有谁在尝试破解我们的密码了，之后做个相关安全策略就可以简单防治了</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/index.html">linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/linux/index.html">linux</a><a href="/tags/awk/index.html">awk</a><a href="/tags/grep/index.html">grep</a><a href="/tags/secure/index.html">secure</a><a href="/tags/sort/index.html">sort</a><a href="/tags/uniq/index.html">uniq</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/index.html">3</a><a class="page-number" href="/page/4/index.html">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/index.html">8</a><a class="extend next" rel="next" href="/page/3/index.html">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/deploy/index.html" title="deploy">deploy<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/interesting/index.html" title="interesting">interesting<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux/index.html" title="linux">linux<sup>29</sup></a></li>
		  
		
		  
			<li><a href="/categories/notices/index.html" title="notices">notices<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/programing/index.html" title="programing">programing<sup>23</sup></a></li>
		  
		
		  
			<li><a href="/categories/sites/index.html" title="sites">sites<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/summarys/index.html" title="summarys">summarys<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/works/index.html" title="works">works<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/linux/index.html" title="linux">linux<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/ubuntu/index.html" title="ubuntu">ubuntu<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/centos/index.html" title="centos">centos<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/yum/index.html" title="yum">yum<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/zlib/index.html" title="zlib">zlib<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/install/index.html" title="install">install<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/git/index.html" title="git">git<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/make/index.html" title="make">make<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/python/index.html" title="python">python<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/c/index.html" title="c">c<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/windows/index.html" title="windows">windows<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/kernel/index.html" title="kernel">kernel<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/libc/index.html" title="libc">libc<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/SAFESEH/index.html" title="SAFESEH">SAFESEH<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/https/index.html" title="https">https<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ln/index.html" title="ln">ln<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/conf/index.html" title="conf">conf<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/gcc/index.html" title="gcc">gcc<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/compress/index.html" title="compress">compress<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/sudo/index.html" title="sudo">sudo<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, this is leaker&#39;s blog in github. <br/>
			Leaker: &#34;Living without an aim is like sailing without a compass.&#34;</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
		<a href="mailto:admin@leelib.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about/index.html" target="_blank" title="leaker">leaker</a>
		
		<a target="_blank" rel="noopener noreferrer" href="http://www.beian.miit.gov.cn/" class="report-link"><img class="report-img" src="/images/report-img.webp" data-spm-anchor-id="a3c00.7621337.7y9jhqsfz.i0.73bb3J6l3J6lkb"><span class="report-link-text">陕ICP备20006522号</span></a>
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script async src="/js/jquery.imagesloaded.min.js"></script>
<script async src="/js/gallery.js"></script>
<script async src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script async src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.webp"/></a>
	</div>
	<script async src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
