<!doctype html><html lang=zh-cn><head><meta name=generator content="Hugo 0.104.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="逃避虽然可耻但有用"><meta property="og:site_name" content="逃避虽然可耻但有用"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="0001-01-01T00:00:00+0000"><meta property="article:modified_time" content="2022-10-07T12:43:36+0800"><title>逃避虽然可耻但有用</title><link rel=alternate type=application/rss+xml href=/atom.xml title=逃避虽然可耻但有用><link rel=stylesheet href=/css/fika.min.23ede50e7ab17b71b8576c52951b006e2dc5d1b0a7e7e1f6c15c57ffa234afd3.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon></head><body><header><div><div id=imglogo><a href=https://www.leelib.com/><img src=/img/logo.webp alt=逃避虽然可耻但有用 title=逃避虽然可耻但有用></a></div><div id=textlogo><h1 class=site-name><a href=/ title=逃避虽然可耻但有用>逃避虽然可耻但有用</a></h1><h2 class=blog-motto>少壮不努力，一生在内地</h2></div><nav class=animated><ul><li><a href=/>主页</a></li><li><a href=/archives/index.html>归档</a></li><li><a href=/about/index.html>关于</a></li><li><a href=/disappear/index.html>消失</a></li></ul></nav></div></header><div id=container><div id=main><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2018/03/30/firewall-port-forward.html title="使用 firewall 配置端口转发" itemprop=url>使用 firewall 配置端口转发</a></h1><p class=article-time><time datetime="2018-03-30 16:36:49 +0800 +0800" itemprop=datePublished>2018-03-30</time></p></header><div class=article-content><h1 id=开启nat转发>开启NAT转发</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --permanent --zone<span style=color:#f92672>=</span>public --add-masquerade
</span></span></code></pre></div><h1 id=本机到本机>本机到本机</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --permanent --zone<span style=color:#f92672>=</span>public --add-forward-port<span style=color:#f92672>=</span>port<span style=color:#f92672>=</span>80:proto<span style=color:#f92672>=</span>tcp:toport<span style=color:#f92672>=</span><span style=color:#ae81ff>8080</span>
</span></span><span style=display:flex><span>firewall-cmd --permanent --zone<span style=color:#f92672>=</span>public --add-service<span style=color:#f92672>=</span>http
</span></span></code></pre></div><h1 id=本机到其他机器>本机到其他机器</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --permanent --zone<span style=color:#f92672>=</span>public --add-forward-port<span style=color:#f92672>=</span>port<span style=color:#f92672>=</span>80:proto<span style=color:#f92672>=</span>tcp:toport<span style=color:#f92672>=</span>8080:toaddr<span style=color:#f92672>=</span>192.168.0.2
</span></span><span style=display:flex><span>firewall-cmd --permanent --zone<span style=color:#f92672>=</span>public --add-port<span style=color:#f92672>=</span>80/tcp
</span></span></code></pre></div><h1 id=重新加载应用>重新加载应用</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --reload
</span></span></code></pre></div><h1 id=只允许指定ip连入指定端口>只允许指定IP连入指定端口</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --permanent --add-rich-rule<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rule family=&#34;ipv4&#34; source address=&#34;192.168.0.2&#34; port protocol=&#34;tcp&#34; port=&#34;80&#34; accept&#39;</span>
</span></span></code></pre></div><h1 id=只允许指定ip段连入指定端口范围>只允许指定IP段连入指定端口范围</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>firewall-cmd --permanent --add-rich-rule<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rule family=&#34;ipv4&#34; source address=&#34;192.168.0.0/24&#34; port protocol=&#34;tcp&#34; port=&#34;80-8080&#34; accept&#39;</span>
</span></span></code></pre></div><h1 id=linux-常用网络优化>Linux 常用网络优化</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 发送 KeepAlive 消息的间隔 1200=2分钟</span>
</span></span><span style=display:flex><span>sysctl -w net.ipv4.tcp_keepalive_time<span style=color:#f92672>=</span><span style=color:#ae81ff>1200</span>
</span></span><span style=display:flex><span><span style=color:#75715e># IP端口重用</span>
</span></span><span style=display:flex><span>sysctl -w net.ipv4.tcp_tw_reuse<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/linux.html>linux</a>
<a href=/tags/firewall.html>firewall</a>
<a href=/tags/firewall-cmd.html>firewall-cmd</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2018/03/29/iptables-port-forward.html title="使用 iptables 配置端口转发" itemprop=url>使用 iptables 配置端口转发</a></h1><p class=article-time><time datetime="2018-03-29 16:50:14 +0800 +0800" itemprop=datePublished>2018-03-29</time></p></header><div class=article-content><h2 id=配置>配置</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sysctl -w net.ipv4.ip_forward<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> <span style=color:#75715e># 启用IP转发功能</span>
</span></span><span style=display:flex><span>sysctl -p <span style=color:#75715e># 立即生效</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;net.ipv4.ip_forward=1&#34;</span> &gt;&gt; /usr/lib/sysctl.d/50-default.conf
</span></span><span style=display:flex><span>iptables -t nat -A POSTROUTING -j MASQUERADE
</span></span></code></pre></div><h2 id=添加端口转发脚本-portforwardsh>添加端口转发脚本 portforward.sh</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># $1=listen port</span>
</span></span><span style=display:flex><span><span style=color:#75715e># $2=connect address and port example:111.111.111.111:2222</span>
</span></span><span style=display:flex><span>iptables -t nat -A PREROUTING -p tcp -i eno1 --dport $1 -j DNAT --to $2
</span></span></code></pre></div><p>想要添加端口的时候只要这么用就好</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./portforward.sh <span style=color:#ae81ff>22</span> 111.111.111.111:22
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/linux.html>linux</a>
<a href=/tags/iptables.html>iptables</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2018/03/29/ubuntu-install-lastest-nodejs.html title=Ubuntu安装最新版本nodejs itemprop=url>Ubuntu安装最新版本nodejs</a></h1><p class=article-time><time datetime="2018-03-29 00:49:33 +0800 +0800" itemprop=datePublished>2018-03-29</time></p></header><div class=article-content><h2 id=最新发行版>最新发行版</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo curl -sL https://deb.nodesource.com/setup | sudo -E bash -
</span></span></code></pre></div><h2 id=指定版本通常用于安装lts版本比如当前最新lts版本是8>指定版本，通常用于安装LTS版本。比如当前最新LTS版本是8</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/ubuntu.html>ubuntu</a>
<a href=/tags/apt.html>apt</a>
<a href=/tags/apt-get.html>apt-get</a>
<a href=/tags/nodejs.html>nodejs</a>
<a href=/tags/npm.html>npm</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2016/05/09/pkgmgr-install-telnet.html title=使用pkgmgr安装telnet客户端 itemprop=url>使用pkgmgr安装telnet客户端</a></h1><p class=article-time><time datetime="2016-05-09 11:04:44 +0800 +0800" itemprop=datePublished>2016-05-09</time></p></header><div class=article-content><p>在 Windows Vista 以上的操作系统中可以使用pkgmgr对Windows功能的快捷安装
比如想要安装 <em>telnet客户端</em> 时，只需在控制台里面键入以下命令并回车：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pkgmgr /iu:<span style=color:#e6db74>&#34;TelnetClient&#34;</span>
</span></span></code></pre></div><p>等几秒钟后 telnet 命令就可以使用了
就这么简单 :)</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/summarys.html>summarys</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2016/04/20/adt-add-library-bug.html title=Eclipse-ADT在Windows下添加library的BUG itemprop=url>Eclipse-ADT在Windows下添加library的BUG</a></h1><p class=article-time><time datetime="2016-04-20 18:35:35 +0800 +0800" itemprop=datePublished>2016-04-20</time></p></header><div class=article-content><h1 id=问题出现>问题出现</h1><p>今天在Windows里使用 Cocos-Quick 创建的项目在使用ADT往Android里面部署的时候遇到了下面的问题
<img src=/images/20160420/adt_add_library_bug.webp alt></p><p>出现上图的情况是这样的操作步骤：</p><ol><li>添加 D:\Tools\Quick-Cocos2dx-Community\cocos\platform\android\java 到 Library 引用里</li><li>点击 OK</li><li>重新打开这个配置界面</li></ol><h1 id=问题解决>问题解决</h1><p>测试了许久后，无意间发现有次选错了路径后Library正常了</p><blockquote><p>当时我选择的 Quick 是 ** F:\Quick-Cocos2dx-Community **
选择的项目目录是 ** F:\Code\Cocos\QuickHello **</p></blockquote><p>终于发现了解决这个BUG的办法：*** 将项目和想要引用的Library放在同一个分区内 ***
遂将项目和 Quick 放到同一个分区内后问题解决，效果如下：
<img src=/images/20160420/adt_add_library_bug_ok.webp alt></p><p>引起这个错误的原因是：*** Eclipse 本身并不是给Windows 这种多分区系统定制的，本身是用来给 MAC 或者 Linux 这种以目录为结构的系统使用的 ***</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2016/01/21/git.html title=Git的常用命令收集 itemprop=url>Git的常用命令收集</a></h1><p class=article-time><time datetime="2016-01-21 23:43:59 +0800 +0800" itemprop=datePublished>2016-01-21</time></p></header><div class=article-content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 拉取最新的代码</span>
</span></span><span style=display:flex><span>git fetch --all
</span></span><span style=display:flex><span><span style=color:#75715e># 恢复到最后一次提交，放弃本地所有修改</span>
</span></span><span style=display:flex><span>git reset --hard
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 列出所有设置</span>
</span></span><span style=display:flex><span>git config -l
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 抛弃对文件的修改</span>
</span></span><span style=display:flex><span>git co  -- &lt;filename&gt;
</span></span><span style=display:flex><span><span style=color:#75715e># 抛弃对目录的修改</span>
</span></span><span style=display:flex><span>git co .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从版本库中删除文件</span>
</span></span><span style=display:flex><span>git rm &lt;filename&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 比较差异</span>
</span></span><span style=display:flex><span>git diff
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看提交历史</span>
</span></span><span style=display:flex><span>git log
</span></span></code></pre></div><p>本篇文章后续不定期更新</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span></div><div class=article-tags><span></span>
<a href=/tags/git.html>git</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/12/13/enable-shared-from-this.html title="类 enable_shared_from_this 的经验总结" itemprop=url>类 enable_shared_from_this 的经验总结</a></h1><p class=article-time><time datetime="2015-12-13 23:32:07 +0800 +0800" itemprop=datePublished>2015-12-13</time></p></header><div class=article-content><h1 id=不能再构造函数内使用-shared_from_this-函数>不能再构造函数内使用 shared_from_this() 函数</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    class_a(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>auto</span> <span style=color:#a6e22e>self</span>(shared_from_this());<span style=color:#75715e>// 这里会报 bad_weak_ptr 错误
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h1 id=子类无法重复继承>子类无法重复继承</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_b</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> class_a, <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>这段代码将无法通过编译。
如果想返回子类的 shared_from_this 指针，则可以进行如下操作</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>virtual</span> <span style=color:#f92672>~</span>class_a()<span style=color:#75715e>// 为了确保 dynamic_pointer_cast 可以工作，需要父类拥有虚函数。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {}
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_b</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> class_a
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>shared_ptr<span style=color:#f92672>&lt;</span>class_b<span style=color:#f92672>&gt;</span> shared_from_this(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> std<span style=color:#f92672>::</span>dynamic_pointer_cast<span style=color:#f92672>&lt;</span>class_b<span style=color:#f92672>&gt;</span>(class_a<span style=color:#f92672>::</span>shared_from_this());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p><strong>通常来说如果定义一个类时，如果这个类可能被继承使用时，将这个类的析构函数定义为虚函数来确保析构的调用顺序</strong></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/c++.html>c++</a>
<a href=/tags/enable_shared_from_this.html>enable_shared_from_this</a>
<a href=/tags/shared_ptr.html>shared_ptr</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/09/16/vs2013-command-prompt-here.html title="Win10里添加目录右键菜单 VS2013 Command Prompt Here" itemprop=url>Win10里添加目录右键菜单 VS2013 Command Prompt Here</a></h1><p class=article-time><time datetime="2015-09-16 04:08:21 +0800 +0800" itemprop=datePublished>2015-09-16</time></p></header><div class=article-content><h1 id=需求>需求</h1><p>我有时需要在命令行里对某个VS项目目录进行编译或部署等操作，总是需要以下步骤：</p><ol><li>打开VS的Command Prompt</li><li>进入该项目目录</li><li>进行编译操作</li></ol><p>个人觉得这样太浪费时间，于是萌生了添加类似 <strong>Command Here</strong> 右键菜单的想法。
办法很简单，在注册表添加相关项就可以了</p><h1 id=解决方案>解决方案</h1><h2 id=windows7-添加方法>Windows7 添加方法</h2><p>将以下内容修改到自己对应VS目录后以文本形式保存到 VS2013-Command-Prompt-Here-win7.reg 文件，然后双击导入即可</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>Windows Registry Editor Version 5.00</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\VS2013 Command Prompt Here]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\VS2013 Command Prompt Here\command]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cmd.exe /s /k pushd \&#34;%1\&#34; &amp; \&#34;C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\&#34; x86&#34;</span>
</span></span></code></pre></div><h2 id=windows10-添加方法>Windows10 添加方法</h2><p>将以下内容修改到自己对应VS目录后以文本形式保存到 VS2013-Command-Prompt-Here-win10.reg 文件，然后双击导入即可</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#a6e22e>Windows Registry Editor Version 5.00</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[HKEY_CLASSES_ROOT\Directory\Background\shell\VS2013 Command Prompt Here]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[HKEY_CLASSES_ROOT\Directory\Background\shell\VS2013 Command Prompt Here\command]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cmd.exe /s /k pushd \&#34;%V\&#34; &amp; \&#34;C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\&#34; x86&#34;</span>
</span></span></code></pre></div><h1 id=为什么区分windows版本>为什么区分Windows版本</h1><p>因为对于Windows来说传参的方式有所改变
<strong>pushd %1</strong> 是用于Windows7的
<strong>pushd %V</strong> 是用于Windows10的</p><h1 id=下载>下载</h1><p>for Windows7: <a href=/files/regfiles/VS2013-Command-Prompt-Here-win7.reg>VS2013-Command-Prompt-Here-win7.reg</a>
for Windows10: <a href=/files/regfiles/VS2013-Command-Prompt-Here-win10.reg>VS2013-Command-Prompt-Here-win10.reg</a></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/summarys.html>summarys</a></div><div class=article-tags><span></span>
<a href=/tags/vs2013.html>VS2013</a>
<a href=/tags/windows10.html>Windows10</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/09/14/vs2013-build-openssl-static.html title=VS2013静态编译openssl批处理 itemprop=url>VS2013静态编译openssl批处理</a></h1><p class=article-time><time datetime="2015-09-14 12:26:46 +0800 +0800" itemprop=datePublished>2015-09-14</time></p></header><div class=article-content><h1 id=打开-visual-studio-2013-command-prompt>打开 Visual Studio 2013 Command Prompt</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget http://www.nasm.us/pub/nasm/releasebuilds/2.11.08/win32/nasm-2.11.08-win32.zip
</span></span><span style=display:flex><span>unzip nasm-2.11.08-win32.zip -d C:/nasm
</span></span><span style=display:flex><span>set PATH<span style=color:#f92672>=</span>%PATH%;C:/nasm/
</span></span><span style=display:flex><span>wget https://www.openssl.org/source/openssl-1.0.2d.tar.gz
</span></span><span style=display:flex><span>tar xzf openssl-1.0.2d.tar.gz
</span></span><span style=display:flex><span>cd openssl-1.0.2d
</span></span><span style=display:flex><span>perl configure VC-WIN32 --prefix<span style=color:#f92672>=</span>C:/openssl
</span></span><span style=display:flex><span>ms<span style=color:#ae81ff>\d</span>o_nasm
</span></span><span style=display:flex><span>nmake -f ms<span style=color:#ae81ff>\n</span>t.mak
</span></span><span style=display:flex><span>nmake -f ms<span style=color:#ae81ff>\n</span>t.mak install
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;build successed.&#34;</span>
</span></span></code></pre></div><p>这样编译不会产生 <strong>error A2070:invalid instruction operands</strong> 这个错误</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/nasm.html>nasm</a>
<a href=/tags/openssl.html>openssl</a>
<a href=/tags/a2070.html>A2070</a>
<a href=/tags/nmake.html>nmake</a>
<a href=/tags/perl.html>perl</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/08/05/fun-battle-net-client-error.html title=好玩的暴雪战网错误提示 itemprop=url>好玩的暴雪战网错误提示</a></h1><p class=article-time><time datetime="2015-08-05 22:08:24 +0800 +0800" itemprop=datePublished>2015-08-05</time></p></header><div class=article-content><p><img src=/images/20150805/battle-net-error.webp alt></p><p>可能是网络或者其他原因引起的。但没想到暴雪运维竟然卖萌掀桌子 0.0///</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/interesting.html>interesting</a></div><div class=article-tags><span></span></div></div></footer></article><nav id=page-nav class=clearfix><a class="extend first" aria-label=First rel=first role=button href=/><span></span>首页</a>
<a class="extend prev" aria-label=Prev rel=prev role=button href=/><span></span>上一页</a>
<a class=page-number href=/ aria-label="Page 1" role=button>1</a>
<a class="page-number current" aria-label="Page 2" role=button>2</a>
<a class=page-number href=/page/3.html aria-label="Page 3" role=button>3</a>
<a class=page-number href=/page/4.html aria-label="Page 4" role=button>4</a>
<a class=page-number href=/page/5.html aria-label="Page 5" role=button>5</a>
<a class=page-number href=/page/6.html aria-label="Page 6" role=button>6</a>
<a class=page-number href=/page/7.html aria-label="Page 7" role=button>7</a>
<span>...</span>
<a class="extend last" aria-label=Last rel=last role=button href=/page/8.html>尾页<span></span></a>
<a class="extend next" aria-label=Next rel=next role=button href=/page/3.html>下一页<span></span></a></nav></div><div id=asidepart><aside class=clearfix><p class=asidetitle>文章分类</p><div class=categorieslist><ul><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/deploy.html title=deploy>deploy</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/interesting.html title=interesting>interesting</a></li><li><span class=count>29</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/linux.html title=linux>linux</a></li><li><span class=count>6</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/notices.html title=notices>notices</a></li><li><span class=count>24</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/programing.html title=programing>programing</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/sites.html title=sites>sites</a></li><li><span class=count>10</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/summarys.html title=summarys>summarys</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/works.html title=works>works</a></li></ul></div></aside><aside class=clearfix><p class=asidetitle>文章标签</p><div class=tagslist><ul class=clearfix><li><a href=/tags/c.html title=c>c<sup>3</sup></a></li><li><a href=/tags/centos.html title=centos>centos<sup>5</sup></a></li><li><a href=/tags/compress.html title=compress>compress<sup>2</sup></a></li><li><a href=/tags/conf.html title=conf>conf<sup>2</sup></a></li><li><a href=/tags/gcc.html title=gcc>gcc<sup>2</sup></a></li><li><a href=/tags/git.html title=git>git<sup>3</sup></a></li><li><a href=/tags/https.html title=https>https<sup>2</sup></a></li><li><a href=/tags/hugo.html title=hugo>hugo<sup>2</sup></a></li><li><a href=/tags/install.html title=install>install<sup>4</sup></a></li><li><a href=/tags/kernel.html title=kernel>kernel<sup>3</sup></a></li><li><a href=/tags/libc.html title=libc>libc<sup>2</sup></a></li><li><a href=/tags/linux.html title=linux>linux<sup>12</sup></a></li><li><a href=/tags/ln.html title=ln>ln<sup>2</sup></a></li><li><a href=/tags/make.html title=make>make<sup>3</sup></a></li><li><a href=/tags/python.html title=python>python<sup>3</sup></a></li><li><a href=/tags/safeseh.html title=safeseh>safeseh<sup>2</sup></a></li><li><a href=/tags/sudo.html title=sudo>sudo<sup>2</sup></a></li><li><a href=/tags/ubuntu.html title=ubuntu>ubuntu<sup>8</sup></a></li><li><a href=/tags/windows.html title=windows>windows<sup>3</sup></a></li><li><a href=/tags/yum.html title=yum>yum<sup>4</sup></a></li><li><a href=/tags/zlib.html title=zlib>zlib<sup>4</sup></a></li></ul></div></aside><div class=rsspart><a href=/atom.xml class=btn target=_blank title=rss>RSS 订阅</a></div></div></div><footer><div id=footer><div class=line><div class=author></div></div><section class=info><p>Hello, this is leaker's blog in github.<br>Leaker: "Living without an aim is like sailing without a compass."</p></section><div class=social-font class=clearfix><a href=mailto:admin@leelib.com target=_blank class=icon-email title="Email Me"></a></div><p class=copyright>Powered by <a rel=noopener title=Hugo href=https://gohugo.io target=_blank>Hugo</a> and Theme by <a rel=noopener title=Fika href=https://github.com/leaker/hugo-theme-fika target=_blank>Fika</a> © 2022
<a href=/about/index.html target=_blank title=leaker>leaker</a>
<a target=_blank rel="noopener noreferrer" href=http://www.beian.miit.gov.cn/ class=report-link><img rel=nofollow title="备案号： 陕ICP备20006522号" class=report-img src=/images/report-img.webp><span class=report-link-text>陕ICP备20006522号</span></a></p></div></footer></body></html>