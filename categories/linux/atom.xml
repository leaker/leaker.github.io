<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on 逃避虽然可耻但有用</title><link>https://www.leelib.com/categories/linux.html</link><description>Recent content in Linux on 逃避虽然可耻但有用</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Thu, 30 Apr 2020 20:32:27 +0800</lastBuildDate><atom:link href="https://www.leelib.com/categories/linux/atom.xml" rel="self" type="application/rss+xml"/><item><title>解决WSL中使用NTFS分区的权限问题</title><link>https://www.leelib.com/2020/04/30/wsl-ntfs.html</link><pubDate>Thu, 30 Apr 2020 20:32:27 +0800</pubDate><guid>https://www.leelib.com/2020/04/30/wsl-ntfs.html</guid><description>&lt;p>当使用WSL的过程中访问WSL系统以外目录时候出现一些奇奇怪怪问题
通常就是WSL对于NTFS分区的目录权限问题。&lt;/p>
&lt;p>使用 &lt;strong>mount -l&lt;/strong> 查看，可能长这样&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@wsl&lt;span style="color:#f92672">]&lt;/span> mount -l
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rootfs on / type lxfs &lt;span style="color:#f92672">(&lt;/span>rw,noatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>none on /dev type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,noatime,mode&lt;span style="color:#f92672">=&lt;/span>755&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sysfs on /sys type sysfs &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,nodev,noexec,noatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>proc on /proc type proc &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,nodev,noexec,noatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>devpts on /dev/pts type devpts &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,noexec,noatime,gid&lt;span style="color:#f92672">=&lt;/span>5,mode&lt;span style="color:#f92672">=&lt;/span>620&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>none on /run type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,noexec,noatime,mode&lt;span style="color:#f92672">=&lt;/span>755&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>none on /run/lock type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,nodev,noexec,noatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>none on /run/shm type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,nodev,noatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>none on /run/user type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,nosuid,nodev,noexec,noatime,mode&lt;span style="color:#f92672">=&lt;/span>755&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc &lt;span style="color:#f92672">(&lt;/span>rw,relatime&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cgroup on /sys/fs/cgroup type tmpfs &lt;span style="color:#f92672">(&lt;/span>rw,relatime,mode&lt;span style="color:#f92672">=&lt;/span>755&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cgroup on /sys/fs/cgroup/devices type cgroup &lt;span style="color:#f92672">(&lt;/span>rw,relatime,devices&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>C:&lt;span style="color:#ae81ff">\ &lt;/span>on /mnt/c type drvfs &lt;span style="color:#f92672">(&lt;/span>rw,noatime,uid&lt;span style="color:#f92672">=&lt;/span>0,gid&lt;span style="color:#f92672">=&lt;/span>0,case&lt;span style="color:#f92672">=&lt;/span>off&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>D:&lt;span style="color:#ae81ff">\ &lt;/span>on /mnt/d type drvfs &lt;span style="color:#f92672">(&lt;/span>rw,noatime,uid&lt;span style="color:#f92672">=&lt;/span>0,gid&lt;span style="color:#f92672">=&lt;/span>0,case&lt;span style="color:#f92672">=&lt;/span>off&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到 &lt;strong>C:\&lt;/strong> 和 &lt;strong>D:\&lt;/strong> 加载状况是这样的。这种情况下代表所有目录均以&lt;strong>root&lt;/strong>权限进行访问。在使用&lt;strong>ssh&lt;/strong>或&lt;strong>git&lt;/strong>等工具的时候有可能会因为一些权限问题导致意外情况发生。&lt;/p></description></item><item><title>使用 firewall 配置端口转发</title><link>https://www.leelib.com/2018/03/30/firewall-port-forward.html</link><pubDate>Fri, 30 Mar 2018 16:36:49 +0800</pubDate><guid>https://www.leelib.com/2018/03/30/firewall-port-forward.html</guid><description>&lt;h1 id="开启nat转发">开启NAT转发&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --zone&lt;span style="color:#f92672">=&lt;/span>public --add-masquerade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="本机到本机">本机到本机&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --zone&lt;span style="color:#f92672">=&lt;/span>public --add-forward-port&lt;span style="color:#f92672">=&lt;/span>port&lt;span style="color:#f92672">=&lt;/span>80:proto&lt;span style="color:#f92672">=&lt;/span>tcp:toport&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --zone&lt;span style="color:#f92672">=&lt;/span>public --add-service&lt;span style="color:#f92672">=&lt;/span>http
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="本机到其他机器">本机到其他机器&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --zone&lt;span style="color:#f92672">=&lt;/span>public --add-forward-port&lt;span style="color:#f92672">=&lt;/span>port&lt;span style="color:#f92672">=&lt;/span>80:proto&lt;span style="color:#f92672">=&lt;/span>tcp:toport&lt;span style="color:#f92672">=&lt;/span>8080:toaddr&lt;span style="color:#f92672">=&lt;/span>192.168.0.2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --zone&lt;span style="color:#f92672">=&lt;/span>public --add-port&lt;span style="color:#f92672">=&lt;/span>80/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="重新加载应用">重新加载应用&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="只允许指定ip连入指定端口">只允许指定IP连入指定端口&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --add-rich-rule&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;rule family=&amp;#34;ipv4&amp;#34; source address=&amp;#34;192.168.0.2&amp;#34; port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;80&amp;#34; accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="只允许指定ip段连入指定端口范围">只允许指定IP段连入指定端口范围&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>firewall-cmd --permanent --add-rich-rule&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;rule family=&amp;#34;ipv4&amp;#34; source address=&amp;#34;192.168.0.0/24&amp;#34; port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;80-8080&amp;#34; accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="linux-常用网络优化">Linux 常用网络优化&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 发送 KeepAlive 消息的间隔 1200=2分钟&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sysctl -w net.ipv4.tcp_keepalive_time&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1200&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># IP端口重用&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sysctl -w net.ipv4.tcp_tw_reuse&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用 iptables 配置端口转发</title><link>https://www.leelib.com/2018/03/29/iptables-port-forward.html</link><pubDate>Thu, 29 Mar 2018 16:50:14 +0800</pubDate><guid>https://www.leelib.com/2018/03/29/iptables-port-forward.html</guid><description>&lt;h2 id="配置">配置&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sysctl -w net.ipv4.ip_forward&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#75715e"># 启用IP转发功能&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sysctl -p &lt;span style="color:#75715e"># 立即生效&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;net.ipv4.ip_forward=1&amp;#34;&lt;/span> &amp;gt;&amp;gt; /usr/lib/sysctl.d/50-default.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>iptables -t nat -A POSTROUTING -j MASQUERADE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="添加端口转发脚本-portforwardsh">添加端口转发脚本 portforward.sh&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#75715e"># $1=listen port&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># $2=connect address and port example:111.111.111.111:2222&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>iptables -t nat -A PREROUTING -p tcp -i eno1 --dport $1 -j DNAT --to $2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>想要添加端口的时候只要这么用就好&lt;/p></description></item><item><title>Ubuntu安装最新版本nodejs</title><link>https://www.leelib.com/2018/03/29/ubuntu-install-lastest-nodejs.html</link><pubDate>Thu, 29 Mar 2018 00:49:33 +0800</pubDate><guid>https://www.leelib.com/2018/03/29/ubuntu-install-lastest-nodejs.html</guid><description>&lt;h2 id="最新发行版">最新发行版&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo curl -sL https://deb.nodesource.com/setup | sudo -E bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="指定版本通常用于安装lts版本比如当前最新lts版本是8">指定版本，通常用于安装LTS版本。比如当前最新LTS版本是8&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Linux里面查看登录日志，并统计次数和排序，查看尝试破解密码的IP</title><link>https://www.leelib.com/2015/01/06/linux-auth-log.html</link><pubDate>Tue, 06 Jan 2015 13:42:53 +0800</pubDate><guid>https://www.leelib.com/2015/01/06/linux-auth-log.html</guid><description>&lt;p>仅需一条命令&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>grep &lt;span style="color:#e6db74">&amp;#34;Failed password for root&amp;#34;&lt;/span> /var/log/secure | awk &lt;span style="color:#e6db74">&amp;#39;{print $11}&amp;#39;&lt;/span> | sort | uniq -c | sort -nr | more
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>结果类似下面这样：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span> 4377 103.41.124.18
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 4368 103.41.124.65
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 3900 62.210.178.226
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2214 103.41.124.33
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 409 62.210.142.105
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 404 115.231.222.45
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 152 122.225.97.91
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 95 122.225.109.205
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 81 109.195.69.233
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 42 74.52.105.154
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 87.106.184.62
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 87.106.1.211
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 82.165.154.23
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 69.64.64.62
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 67.226.156.239
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 61.40.192.52
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 60.213.190.98
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 27.251.179.130
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 222.77.190.33
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 211.172.219.251
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 21 210.249.105.10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 15 220.194.46.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 12 203.184.128.106
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1 60.190.71.52
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1 193.104.41.58
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这样我们就可以很清楚的了解有谁在尝试破解我们的密码了，之后做个相关安全策略就可以简单防治了&lt;/p></description></item><item><title>Linux里Git出现fatal: Unable to find remote helper for 'https'的解决方案</title><link>https://www.leelib.com/2014/12/30/linux-git-remote-helper-for-https.html</link><pubDate>Tue, 30 Dec 2014 23:42:43 +0800</pubDate><guid>https://www.leelib.com/2014/12/30/linux-git-remote-helper-for-https.html</guid><description>&lt;p>在Linux内源码编译安装的Git如果出现了 “&lt;strong>Unable to find remote helper for &amp;lsquo;https&amp;rsquo;&lt;/strong>” 错误，则说明&lt;strong>编译的时候没有发现系统有openssl开发包&lt;/strong>。&lt;/p></description></item><item><title>CentOS安装GO编译环境</title><link>https://www.leelib.com/2014/11/01/centos-install-go.html</link><pubDate>Sat, 01 Nov 2014 08:42:17 +0800</pubDate><guid>https://www.leelib.com/2014/11/01/centos-install-go.html</guid><description>&lt;p>我们这里使用源码编译安装，直接按顺序执行下列命令就可以成功(我都是假设已经有root权限的情况下，所以执行之前请确认自己已有root权限)：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install -y mercurial gcc-c++ gcc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir /usr/local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /usr/local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hg clone -r release https://go.googlecode.com/hg/ go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /usr/local/go/src
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmox +x all.bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./all.bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir /root/go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOROOT&lt;span style="color:#f92672">=&lt;/span>/usr/local/go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOPATH&lt;span style="color:#f92672">=&lt;/span>/root/go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOBIN&lt;span style="color:#f92672">=&lt;/span>/usr/local/go/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOOS&lt;span style="color:#f92672">=&lt;/span>linux
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>.:$PATH:/usr/local/go/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>现在应该已经可以执行go命令测试了：&lt;/p></description></item><item><title>让CentOS的yum命令可以直接安装最新的nginx</title><link>https://www.leelib.com/2014/10/31/yum-install-last-nginx.html</link><pubDate>Fri, 31 Oct 2014 22:46:53 +0800</pubDate><guid>https://www.leelib.com/2014/10/31/yum-install-last-nginx.html</guid><description>&lt;h1 id="添加nginx的repo">添加nginx的repo&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#39;[nginx]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">name=nginx repo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">baseurl=http://nginx.org/packages/centos/7/x86_64
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">gpgcheck=0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">enabled=1&amp;#39;&lt;/span> &amp;gt; /etc/yum.repos.d/nginx.repo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="安装">安装&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>yum install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>是不是直接安装了最新版的nginx呢
( ͡° ͜ʖ ͡°)&lt;/p></description></item><item><title>解决yum安装 openssl-devel时产生的Multilib version problems found错误</title><link>https://www.leelib.com/2014/06/29/fix-yum-openssl-devel-multilib-version-problems-found.html</link><pubDate>Sun, 29 Jun 2014 06:56:31 +0800</pubDate><guid>https://www.leelib.com/2014/06/29/fix-yum-openssl-devel-multilib-version-problems-found.html</guid><description>&lt;p>今天给一台CentOS系统安装openssl-devel时，出现了如下信息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># yum install -y openssl-devel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Loaded plugins: fastestmirror, security
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Repository updates is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Repository centosplus is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Repository contrib is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Repository extras is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Loading mirror speeds from cached hostfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * base: mirrors.tuna.tsinghua.edu.cn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * extras: mirrors.tuna.tsinghua.edu.cn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * updates: mirrors.tuna.tsinghua.edu.cn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Setting up Install Process
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Resolving Dependencies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package openssl-devel.x86_64 0:1.0.1e-16.el6_5.14 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: krb5-devel &lt;span style="color:#66d9ef">for&lt;/span> package: openssl-devel-1.0.1e-16.el6_5.14.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package krb5-devel.x86_64 0:1.10.3-15.el6_5.1 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libselinux-devel &lt;span style="color:#66d9ef">for&lt;/span> package: krb5-devel-1.10.3-15.el6_5.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libcom_err-devel &lt;span style="color:#66d9ef">for&lt;/span> package: krb5-devel-1.10.3-15.el6_5.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: keyutils-libs-devel &lt;span style="color:#66d9ef">for&lt;/span> package: krb5-devel-1.10.3-15.el6_5.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package keyutils-libs-devel.x86_64 0:1.4-4.el6 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package libcom_err-devel.x86_64 0:1.41.12-18.el6 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package libselinux-devel.x86_64 0:2.0.94-5.3.el6_4.1 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libselinux &lt;span style="color:#f92672">=&lt;/span> 2.0.94-5.3.el6_4.1 &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-devel-2.0.94-5.3.el6_4.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libsepol-devel &amp;gt;&lt;span style="color:#f92672">=&lt;/span> 2.0.32-1 &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-devel-2.0.94-5.3.el6_4.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: pkgconfig&lt;span style="color:#f92672">(&lt;/span>libsepol&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-devel-2.0.94-5.3.el6_4.1.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package libselinux.i686 0:2.0.94-5.3.el6_4.1 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libdl.so.2&lt;span style="color:#f92672">(&lt;/span>GLIBC_2.1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libdl.so.2&lt;span style="color:#f92672">(&lt;/span>GLIBC_2.0&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libdl.so.2 &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libc.so.6&lt;span style="color:#f92672">(&lt;/span>GLIBC_2.8&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: ld-linux.so.2&lt;span style="color:#f92672">(&lt;/span>GLIBC_2.3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: ld-linux.so.2 &lt;span style="color:#66d9ef">for&lt;/span> package: libselinux-2.0.94-5.3.el6_4.1.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package libsepol-devel.x86_64 0:2.0.41-4.el6 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package glibc.i686 0:2.12-1.132.el6_5.2 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libfreebl3.so&lt;span style="color:#f92672">(&lt;/span>NSSRAWHASH_3.12.3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> package: glibc-2.12-1.132.el6_5.2.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Processing Dependency: libfreebl3.so &lt;span style="color:#66d9ef">for&lt;/span> package: glibc-2.12-1.132.el6_5.2.i686
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Running transaction check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---&amp;gt; Package nss-softokn-freebl.i686 0:3.14.3-10.el6_5 will be installed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--&amp;gt; Finished Dependency Resolution
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Error: Multilib version problems found. This often means that the root
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cause is something &lt;span style="color:#66d9ef">else&lt;/span> and multilib version checking is just
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pointing out that there is a problem. Eg.:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1&lt;span style="color:#ae81ff">\.&lt;/span> You have an upgrade &lt;span style="color:#66d9ef">for&lt;/span> libselinux which is missing some
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dependency that another package requires. Yum is trying to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> solve this by installing an older version of libselinux of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> different architecture. If you exclude the bad architecture
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> yum will tell you what the root cause is &lt;span style="color:#f92672">(&lt;/span>which package
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> requires what&lt;span style="color:#f92672">)&lt;/span>. You can try redoing the upgrade with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --exclude libselinux.otherarch ... this should give you an error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message showing the root cause of the problem.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2&lt;span style="color:#ae81ff">\.&lt;/span> You have multiple architectures of libselinux installed, but
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> yum can only see an upgrade &lt;span style="color:#66d9ef">for&lt;/span> one of those arcitectures.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you don&lt;span style="color:#960050;background-color:#1e0010">&amp;#39;&lt;/span>t want/need both architectures anymore &lt;span style="color:#66d9ef">then&lt;/span> you
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> can remove the one with the missing update and everything
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will work.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 3&lt;span style="color:#ae81ff">\.&lt;/span> You have duplicate versions of libselinux installed already.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> You can use &lt;span style="color:#e6db74">&amp;#34;yum check&amp;#34;&lt;/span> to get yum show these errors.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...you can also use --setopt&lt;span style="color:#f92672">=&lt;/span>protected_multilib&lt;span style="color:#f92672">=&lt;/span>false to remove
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> this checking, however this is almost never the correct thing to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">do&lt;/span> as something &lt;span style="color:#66d9ef">else&lt;/span> is very likely to go wrong &lt;span style="color:#f92672">(&lt;/span>often causing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> much more problems&lt;span style="color:#f92672">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Protected multilib versions: libselinux-2.0.94-5.3.el6_4.1.i686 !&lt;span style="color:#f92672">=&lt;/span> libselinux-2.0.94-5.3.0.1.el6.centos.plus.x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> You could try using --skip-broken to work around the problem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> You could try running: rpm -Va --nofiles --nodigest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>最后在一个日文的网站上找到了解决办法：&lt;/strong>&lt;/p></description></item><item><title>一句话经验</title><link>https://www.leelib.com/2014/04/08/dmesg-tail.html</link><pubDate>Tue, 08 Apr 2014 00:37:23 +0800</pubDate><guid>https://www.leelib.com/2014/04/08/dmesg-tail.html</guid><description>&lt;p>当内核加载失败时，使用以下命令查看出错记录，可以帮助找到问题所在：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>dmesg | tail -n &lt;span style="color:#ae81ff">30&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>升级Linux内核3.8.10记录</title><link>https://www.leelib.com/2014/04/08/upgrade-linux-kernel-to-3-8-10.html</link><pubDate>Tue, 08 Apr 2014 00:10:19 +0800</pubDate><guid>https://www.leelib.com/2014/04/08/upgrade-linux-kernel-to-3-8-10.html</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install rpmdevtools yum-utils ncurses-devel make rpm-build rpm-devel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.10.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xvf linux-3.8.10.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd linux-3.8.10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make mrproper &lt;span style="color:#75715e"># 第一次可忽略&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make menuconfig &lt;span style="color:#75715e"># 记得保存&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make modules_install
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make install
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>new-kernel-pkg --mkinitrd --depmod --install 3.8.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Starting httpd: (13)Permission denied: make_sock: could not bind to address 解决方案</title><link>https://www.leelib.com/2013/11/01/httpd-permission-denied-make-sock-could-not-bind-to-address.html</link><pubDate>Fri, 01 Nov 2013 08:36:55 +0800</pubDate><guid>https://www.leelib.com/2013/11/01/httpd-permission-denied-make-sock-could-not-bind-to-address.html</guid><description>&lt;h1 id="原因">原因&lt;/h1>
&lt;p>修改了conf里面的Listen端口&lt;/p>
&lt;h1 id="解决">解决&lt;/h1>
&lt;ol>
&lt;li>修改成SELinux安全机制里面默认允许的端口（80, 443, 488, 8008, 8009, 8443）等等。&lt;/li>
&lt;li>修改SELinux安全设置
如：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>semanage port -a -t http_port_t -p tcp &amp;lt;listen port&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>[摘抄笔记]sublime2在Ubuntu下命令安装以及官网压缩包安装</title><link>https://www.leelib.com/2013/09/22/ubuntu-install-sublime2-with-src.html</link><pubDate>Sun, 22 Sep 2013 07:57:24 +0800</pubDate><guid>https://www.leelib.com/2013/09/22/ubuntu-install-sublime2-with-src.html</guid><description>&lt;h1 id="通过终端terminal命令安装">通过终端（terminal）命令安装&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo add-apt-repository ppa:webupd8team/sublime-text-2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get install sublime-text
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="通过解压官网安装包安装">通过解压官网安装包安装&lt;/h1>
&lt;ol>
&lt;li>将下载的tar.bz2文件解压&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>tar xf Sublime Text 2.0.1 x64.tar.bz2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>将解压后的文件夹移动到应用程序文件夹&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mv Sublime Text &lt;span style="color:#ae81ff">2&lt;/span> /opt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>设置terminal快速启动命令&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo ln -s /opt/Sublime Text 2/sublime_text /usr/bin/sublime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>在桌面创建快捷方式&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo sublime /usr/share/applications/sublime.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>将下面的代码保存进去&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[Desktop Entry]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Version&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Name&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Sublime Text 2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Only KDE 4 seems to use GenericName, so we reuse the KDE strings.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># From Ubuntu&amp;#39;s language-pack-kde-XX-base packages, version 9.04-20090413.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">GenericName&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Text Editor&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Exec&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">sublime&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Terminal&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Icon&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">/opt/Sublime Text 2/Icon/48x48/sublime_text.webp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Type&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Application&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Categories&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">TextEditor;IDE;Development&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">X-Ayatana-Desktop-Shortcuts&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">NewWindow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[NewWindow Shortcut Group]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Name&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">New Window&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">Exec&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">sublime -n&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">TargetEnvironment&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">Unity&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>貌似安装sublime3的时候会自动创建快速启动命令，所以如果安装的是3就不用再手动设置了&lt;/p></description></item><item><title>解决在安装了kernel-devel后/lib/modules/$(uname -r)/build 链接失效的问题</title><link>https://www.leelib.com/2013/09/07/fix-kernel-devel.html</link><pubDate>Sat, 07 Sep 2013 12:28:20 +0800</pubDate><guid>https://www.leelib.com/2013/09/07/fix-kernel-devel.html</guid><description>&lt;p>如何安装kernel-devel，可以参考我之前的文章：&lt;a href="https://www.leelib.com/2013/06/02/install-kernel-devel.html">《Linux下编译驱动发现没有内核源码的解决办法》&lt;/a>&lt;/p>
&lt;p>下面是我写的一个自动脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd /usr/src/kernels
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd &lt;span style="color:#66d9ef">$(&lt;/span>ls -d */ | head -n 1&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s -f &lt;span style="color:#66d9ef">$(&lt;/span>pwd&lt;span style="color:#66d9ef">)&lt;/span> /lib/modules/&lt;span style="color:#66d9ef">$(&lt;/span>uname -r&lt;span style="color:#66d9ef">)&lt;/span>/build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>至于为什么要费劲去 *&lt;em>cd $(ls -d &lt;em>/ | head -n 1)&lt;/em>&lt;/em> 的原因是：很多系统装出来的 &lt;strong>kernel-devel&lt;/strong> 目录名称跟 &lt;strong>$(uname -r)&lt;/strong> 并不一致&lt;/p></description></item><item><title>结构体sk_buff在Linux内核2.6.18与2.6.33中的区别</title><link>https://www.leelib.com/2013/09/06/sk-buff-2-6-18-diff-2-6-33.html</link><pubDate>Fri, 06 Sep 2013 17:28:58 +0800</pubDate><guid>https://www.leelib.com/2013/09/06/sk-buff-2-6-18-diff-2-6-33.html</guid><description>&lt;p>在Linux 2.6.33.6中，源文件在：/usr/src/kernels/2.6.33.6/include/linux/skbuff.h&lt;/p>
&lt;h1 id="struct-sk_buff在2618中的定义">struct sk_buff在2.6.18中的定义：&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> sk_buff {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* These two members must be first. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>next;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>prev;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sock &lt;span style="color:#f92672">*&lt;/span>sk;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> skb_timeval tstamp;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> net_device &lt;span style="color:#f92672">*&lt;/span>dev;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> net_device &lt;span style="color:#f92672">*&lt;/span>input_dev;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> tcphdr &lt;span style="color:#f92672">*&lt;/span>th;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> udphdr &lt;span style="color:#f92672">*&lt;/span>uh;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> icmphdr &lt;span style="color:#f92672">*&lt;/span>icmph;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> igmphdr &lt;span style="color:#f92672">*&lt;/span>igmph;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> iphdr &lt;span style="color:#f92672">*&lt;/span>ipiph;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> ipv6hdr &lt;span style="color:#f92672">*&lt;/span>ipv6h;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>raw;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } h;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> iphdr &lt;span style="color:#f92672">*&lt;/span>iph;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> ipv6hdr &lt;span style="color:#f92672">*&lt;/span>ipv6h;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> arphdr &lt;span style="color:#f92672">*&lt;/span>arph;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>raw;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } nh;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>raw;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } mac;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> dst_entry &lt;span style="color:#f92672">*&lt;/span>dst;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sec_path &lt;span style="color:#f92672">*&lt;/span>sp;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * This is the control buffer. It is free to use for every
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * layer. Please put your private variables there. If you
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * want to keep them across layers you have to do a skb_clone()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * first. This is owned by whoever has the skb queued ATM.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">char&lt;/span> cb[&lt;span style="color:#ae81ff">48&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> len,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data_len,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mac_len,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> csum;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u32 priority;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u8 local_df:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cloned:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip_summed:&lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nohdr:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nfctinfo:&lt;span style="color:#ae81ff">3&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u8 pkt_type:&lt;span style="color:#ae81ff">3&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fclone:&lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifndef CONFIG_XEN
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> ipvs_property:&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#else
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> ipvs_property:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> proto_data_valid:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> proto_csum_blank:&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __be16 protocol;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>destructor)(&lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>skb);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NETFILTER
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> nf_conntrack &lt;span style="color:#f92672">*&lt;/span>nfct;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#if defined(CONFIG_NF_CONNTRACK) || defined(CONFIG_NF_CONNTRACK_MODULE)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>nfct_reasm;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_BRIDGE_NETFILTER
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> nf_bridge_info &lt;span style="color:#f92672">*&lt;/span>nf_bridge;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u32 nfmark;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif &lt;/span>&lt;span style="color:#75715e">/* CONFIG_NETFILTER */&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_SCHED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u16 tc_index; &lt;span style="color:#75715e">/* traffic control index */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_CLS_ACT
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u16 tc_verd; &lt;span style="color:#75715e">/* traffic control verdict */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_DMA
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">dma_cookie_t&lt;/span> dma_cookie;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NETWORK_SECMARK
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u32 secmark;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* These elements must be at the end, see alloc_skb() for details. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> truesize;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">atomic_t&lt;/span> users;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>head,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">*&lt;/span>data,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">*&lt;/span>tail,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">*&lt;/span>end;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* Extra stuff at the end to avoid breaking abi */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifndef __GENKSYMS__
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> peeked;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="struct-sk_buff在2633中的定义">struct sk_buff在2.6.33中的定义：&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> sk_buff {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* These two members must be first. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>next;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>prev;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">ktime_t&lt;/span> tstamp;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sock &lt;span style="color:#f92672">*&lt;/span>sk;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> net_device &lt;span style="color:#f92672">*&lt;/span>dev;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * This is the control buffer. It is free to use for every
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * layer. Please put your private variables there. If you
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * want to keep them across layers you have to do a skb_clone()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * first. This is owned by whoever has the skb queued ATM.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">char&lt;/span> cb[&lt;span style="color:#ae81ff">48&lt;/span>] &lt;span style="color:#a6e22e">__aligned&lt;/span>(&lt;span style="color:#ae81ff">8&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">long&lt;/span> _skb_dst;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_XFRM
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> sec_path &lt;span style="color:#f92672">*&lt;/span>sp;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> len,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data_len;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u16 mac_len,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hdr_len;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __wsum csum;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u16 csum_start;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u16 csum_offset;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u32 priority;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">kmemcheck_bitfield_begin&lt;/span>(flags1);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u8 local_df:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cloned:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip_summed:&lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nohdr:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nfctinfo:&lt;span style="color:#ae81ff">3&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u8 pkt_type:&lt;span style="color:#ae81ff">3&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fclone:&lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipvs_property:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> peeked:&lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nf_trace:&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __be16 protocol:&lt;span style="color:#ae81ff">16&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">kmemcheck_bitfield_end&lt;/span>(flags1);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> (&lt;span style="color:#f92672">*&lt;/span>destructor)(&lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>skb);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#if defined(CONFIG_NF_CONNTRACK) || defined(CONFIG_NF_CONNTRACK_MODULE)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> nf_conntrack &lt;span style="color:#f92672">*&lt;/span>nfct;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">struct&lt;/span> sk_buff &lt;span style="color:#f92672">*&lt;/span>nfct_reasm;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_BRIDGE_NETFILTER
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> nf_bridge_info &lt;span style="color:#f92672">*&lt;/span>nf_bridge;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> skb_iif;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_SCHED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u16 tc_index; &lt;span style="color:#75715e">/* traffic control index */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_CLS_ACT
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u16 tc_verd; &lt;span style="color:#75715e">/* traffic control verdict */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">kmemcheck_bitfield_begin&lt;/span>(flags2);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u16 queue_mapping:&lt;span style="color:#ae81ff">16&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_IPV6_NDISC_NODETYPE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u8 ndisc_nodetype:&lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#a6e22e">kmemcheck_bitfield_end&lt;/span>(flags2);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* 0/14 bit hole */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NET_DMA
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">dma_cookie_t&lt;/span> dma_cookie;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ifdef CONFIG_NETWORK_SECMARK
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> __u32 secmark;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u32 mark;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u32 dropcount;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __u16 vlan_tci;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sk_buff_data_t&lt;/span> transport_header;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sk_buff_data_t&lt;/span> network_header;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sk_buff_data_t&lt;/span> mac_header;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* These elements must be at the end, see alloc_skb() for details. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sk_buff_data_t&lt;/span> tail;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sk_buff_data_t&lt;/span> end;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>head,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">*&lt;/span>data;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> truesize;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">atomic_t&lt;/span> users;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>有了以上定义的话，我们就可以做类似如下定义来使我们的驱动支持多内核了：&lt;/p></description></item><item><title>解决CentOS安装新版本python后，yum不能使用的问题</title><link>https://www.leelib.com/2013/07/26/fix-centos-yum.html</link><pubDate>Fri, 26 Jul 2013 02:42:41 +0800</pubDate><guid>https://www.leelib.com/2013/07/26/fix-centos-yum.html</guid><description>&lt;h1 id="centos-上安装新版本-python">CentOS 上安装新版本 python&lt;/h1>
&lt;p>请看： &lt;a href="https://www.leelib.com/2013/07/10/fix-python-deff-version.html">安装python以及解决版本问题&lt;/a>&lt;/p>
&lt;p>但在安装新版本后，yum不能正常使用了。原因是yum是基于默认的python版本运行的，例如CentOS6.2基于python2.6。但我们安装版本后建立了链接，覆盖掉了默认python调用，导致yum脚本无法正常调用到自己想要的版本。&lt;/p></description></item><item><title>解决编译时出现“gnu/stubs-64.h: No such file or directory”的问题</title><link>https://www.leelib.com/2013/07/10/gnu-stubs-64-h-no-such-file-or-directory.html</link><pubDate>Wed, 10 Jul 2013 10:12:49 +0800</pubDate><guid>https://www.leelib.com/2013/07/10/gnu-stubs-64-h-no-such-file-or-directory.html</guid><description>&lt;h1 id="这个实际上是系统没有安装-glibc-开发包的问题">这个实际上是系统没有安装 &lt;strong>glibc&lt;/strong> 开发包的问题&lt;/h1>
&lt;h2 id="ubuntu-x64">Ubuntu x64&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>apt-get install libc6-dev-amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="centos-x64">CentOS x64&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install glibc-devel.x86_64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>如何安装新版本python，以及解决安装了新版python后，默认python依然调用旧版本的问题</title><link>https://www.leelib.com/2013/07/10/fix-python-deff-version.html</link><pubDate>Wed, 10 Jul 2013 06:27:35 +0800</pubDate><guid>https://www.leelib.com/2013/07/10/fix-python-deff-version.html</guid><description>&lt;h1 id="安装新版本python">安装新版本python&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget http://python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xjf Python-2.7.3.tar.bz2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd Python-2.7.3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make atlinstall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这时 python2.7.3 版本已经安装成功了。
但调用 &lt;strong>python &amp;ndash;version&lt;/strong> 依然会显示并使用旧版本&lt;/p>
&lt;h1 id="解决办法就是重新建立一个链接并覆盖掉旧的">解决办法就是重新建立一个链接并覆盖掉旧的&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ln -s /usr/local/bin/python2.7 /usr/bin/python -f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>再调用 &lt;strong>python &amp;ndash;version&lt;/strong> 显示结果&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># python --version&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Python 2.7.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>至此，问题解决 :)&lt;/p></description></item><item><title>Linux调用tcpdump时“tcpdump: USB link-layer type filtering not implemented”解决方案</title><link>https://www.leelib.com/2013/06/08/tcpdump-error.html</link><pubDate>Sat, 08 Jun 2013 03:00:30 +0800</pubDate><guid>https://www.leelib.com/2013/06/08/tcpdump-error.html</guid><description>&lt;p>当调用tcpdump时，出现错误：&lt;strong>tcpdump: USB link-layer type filtering not implemented&lt;/strong>&lt;/p>
&lt;h1 id="原因">原因&lt;/h1>
&lt;p>说明系统可能有多块网卡共存。&lt;/p>
&lt;h1 id="需要指定工作网卡才能开始截包使用参数举例">需要指定工作网卡才能开始截包，使用参数举例&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># tcpdump -i eth0 udp port 53&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;em>在实际使用中例子中“eth0”“udp”“53”等参数，要根据实际需要来进行修改。&lt;/em>
&lt;em>虽然一般单网卡默认名称应该是eth0，但也有其他情况。实际中要使用ifconfig查看自己需要使用的网卡。&lt;/em>&lt;/p></description></item><item><title>Linux下编译驱动发现没有内核源码的解决办法</title><link>https://www.leelib.com/2013/06/02/install-kernel-devel.html</link><pubDate>Sun, 02 Jun 2013 12:25:27 +0800</pubDate><guid>https://www.leelib.com/2013/06/02/install-kernel-devel.html</guid><description>&lt;h2 id="centos系统">CentOS系统&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install -y kernel-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ubuntu系统">Ubuntu系统&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>apt-get install linux-source
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以上～！&lt;/p>
&lt;blockquote>
&lt;p>参考：《或许你不需要整个内核的源代码》 - &lt;a href="http://wiki.centos.org/zh/HowTos/I_need_the_Kernel_Source">http://wiki.centos.org/zh/HowTos/I_need_the_Kernel_Source&lt;/a>&lt;/p>&lt;/blockquote></description></item><item><title>Linux下编译驱动代码时smp_lock.h文件找不到的解决方案</title><link>https://www.leelib.com/2013/06/01/compile-can-not-found-smp-lock-h.html</link><pubDate>Sat, 01 Jun 2013 13:07:20 +0800</pubDate><guid>https://www.leelib.com/2013/06/01/compile-can-not-found-smp-lock-h.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2013/06/linux_kernel.webp#center" alt="kernel">&lt;/p>
&lt;p>项目中有个驱动代码之前在老版本linux系统中编写的
在移植到 &lt;strong>linux-kernel-3.2.0&lt;/strong> 后，编译时出现一处错误 &lt;strong>fatal error: linux/smp_lock.h: No such file or directory&lt;/strong>&lt;/p>
&lt;h1 id="解决办法">解决办法&lt;/h1>
&lt;p>将：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;linux/smp_lock.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>替换成：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;linux/hardirq.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>CentOS系统IP设置</title><link>https://www.leelib.com/2013/05/12/centos-set-ip.html</link><pubDate>Sun, 12 May 2013 05:54:24 +0800</pubDate><guid>https://www.leelib.com/2013/05/12/centos-set-ip.html</guid><description>&lt;blockquote>
&lt;p>以最小化安装的CentOS系统默认是不自动设置IP信息的。
我们想要正常访问网络，第一步就必须先把IP设置好。&lt;/p>&lt;/blockquote>
&lt;h1 id="设置ip为自动获取">设置IP为自动获取：&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># dhclient eth0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="设置ip为手动填写">设置IP为手动填写：&lt;/h1>
&lt;ol>
&lt;li>设置网关&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># echo &amp;#39;GATEWAY=&amp;#34;192.168.1.1&amp;#34;&amp;#39; &amp;gt;&amp;gt; /etc/sysconfig/network&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>设置网卡信息&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># echo &amp;#39;DEVICE=&amp;#34;eth0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>HWADDR&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;00:0C:29:28:F9:88&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NM_CONTROLLED&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;yes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ONBOOT&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;yes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>BOOTPROTO&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>BROADCAST&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;192.168.1.255&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IPADDR&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;192.168.1.120&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NETMASK&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;255.255.255.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NETWORK&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;192.168.1.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IPV6INIT&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;yes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>IPV6_AUTOCONF&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;yes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TYPE&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Ethernet&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">&amp;#39;&lt;/span> &amp;gt; /etc/sysconfig/network-scripts/ifcfg-eth0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>设置DNS&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># echo &amp;#39;nameserver 8.8.8.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nameserver 8.8.4.4&lt;span style="color:#960050;background-color:#1e0010">&amp;#39;&lt;/span>&amp;gt; /etc/resolv.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>重启网络&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@centos ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># service network restart&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Shutting down loopback interface: &lt;span style="color:#f92672">[&lt;/span> OK &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Bringing up loopback interface: &lt;span style="color:#f92672">[&lt;/span> OK &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Bringing up interface eth0: &lt;span style="color:#f92672">[&lt;/span> OK &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Python执行出现“No module named MySQLdb”解决方案</title><link>https://www.leelib.com/2013/04/05/python-no-module-named-mysqldb.html</link><pubDate>Fri, 05 Apr 2013 14:13:00 +0800</pubDate><guid>https://www.leelib.com/2013/04/05/python-no-module-named-mysqldb.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2013/04/mysqldb_error.webp#center" alt="mysqldb">&lt;/p>
&lt;p>如果在python程序执行时遇到这个错误提示“&lt;strong>No module named MySQLdb&lt;/strong>”&lt;/p>
&lt;h1 id="这个说明缺少对应的库解决办法是">这个说明缺少对应的库，解决办法是：&lt;/h1>
&lt;h2 id="mix-os-easy_install">mix os (easy_install)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>easy_install mysql-python &lt;span style="color:#f92672">(&lt;/span>mix os&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="mix-os-pip">mix os (pip)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>pip install mysql-python &lt;span style="color:#f92672">(&lt;/span>mix os&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ubuntu">Ubuntu&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>apt-get install python-mysqldb &lt;span style="color:#f92672">(&lt;/span>Linux Ubuntu, ...&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="freebsd">FreeBSD&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd /usr/ports/databases/py-MySQLdb &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> make install clean &lt;span style="color:#f92672">(&lt;/span>FreeBSD&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="fedora-centos">Fedora, CentOS&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>yum install MySQL-python &lt;span style="color:#f92672">(&lt;/span>Linux Fedora, CentOS ...&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>对应后面括号内系统执行相应的命令就可以进行安装&lt;/strong>&lt;/p></description></item><item><title>让ubuntu 12 desktop版本回归Gnome桌面</title><link>https://www.leelib.com/2013/03/17/back-ubuntu-12-desktop-gnome.html</link><pubDate>Sun, 17 Mar 2013 18:55:21 +0800</pubDate><guid>https://www.leelib.com/2013/03/17/back-ubuntu-12-desktop-gnome.html</guid><description>&lt;p>由于ubuntu 12.04默认采用了Unity界面，对于我这种菜鸟来说用起来很是不顺手，所以搜了一下，发现有办法回归gnome界面。&lt;/p>
&lt;h1 id="安装">安装&lt;/h1>
&lt;p>在此记录下供自己以及还不了解这个解决办法的人使用。&lt;/p></description></item><item><title>解决ubuntu下dante不能正常启动的问题</title><link>https://www.leelib.com/2012/05/24/fix-ubuntu-start-dante-error.html</link><pubDate>Thu, 24 May 2012 06:36:37 +0800</pubDate><guid>https://www.leelib.com/2012/05/24/fix-ubuntu-start-dante-error.html</guid><description>&lt;p>首先查看日志文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@ubuntu&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># cat /var/log/danted.log&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>发现里面有这样的记录&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>May 24 13:57:52 (1337839072) danted[13596]: socks_seteuid(): old: 0, new: 65534
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>May 24 13:57:52 (1337839072) danted[13596]: socks_reseteuid(): current: 65534, new: 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>May 24 13:57:52 (1337839072) danted[13596]: fixsettings(): setting the libwrap uid to 0 is not recommended
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>May 24 13:57:52 (1337839072) danted[13596]: symbolfunction(): compiletime configuration error? Failed to open &amp;#34;libc.so&amp;#34;: /usr/lib/i386-linux-gnu/libc.so: invalid ELF header
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>说明程序在找/usr/lib/i386-linux-gnu/libc.so位置的libc.so没找到，所以解决办法就是创建一个链接命令如下：&lt;/p></description></item><item><title>让RedHat系统使用CentOS的yum</title><link>https://www.leelib.com/2012/04/25/redhat-use-centos-yum.html</link><pubDate>Wed, 25 Apr 2012 10:04:10 +0800</pubDate><guid>https://www.leelib.com/2012/04/25/redhat-use-centos-yum.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2012/04/redhat.webp#center" alt="redhat">&lt;/p>
&lt;h1 id="错误原因">错误原因&lt;/h1>
&lt;p>在使用未注册的 RedHat Linux 企业版时。使用yum命令会出现如下提示：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@localhost ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># yum install httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Loaded plugins: rhnplugin, security
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>This system is not registered with RHN.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RHN support will be disabled.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Setting up Install Process
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>No package httpd available.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Nothing to &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="解决方案">解决方案&lt;/h1>
&lt;p>而这种情况可以使用CentOS的yum来代替掉系统本身的yum
脚本如下：&lt;/p></description></item><item><title>解决编译freeradius出现 cannot find -lperl 的问题</title><link>https://www.leelib.com/2012/03/27/fixed-issue-freeradius-cannot-find-lperl.html</link><pubDate>Tue, 27 Mar 2012 04:30:09 +0800</pubDate><guid>https://www.leelib.com/2012/03/27/fixed-issue-freeradius-cannot-find-lperl.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2012/03/lperl.webp#center" alt="lperl">&lt;/p>
&lt;p>今天因为项目需要，需要编译freeradius来使用。&lt;/p>
&lt;h1 id="错误原因">错误原因&lt;/h1>
&lt;p>结果在编译过程中出现如上错误 &lt;code>cannot find -lperl&lt;/code>。&lt;/p>
&lt;h1 id="解决方案">解决方案&lt;/h1>
&lt;h2 id="centos">CentOS&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo yum -y install libtool-perl*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ubuntu">Ubuntu&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get install libperl-dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>做个笔记，希望能够帮到遇到这个问题的人。
(o≖◡≖)&lt;/p></description></item><item><title>如何使gedit能够编辑和保存到所属root用户的目录中</title><link>https://www.leelib.com/2012/03/20/gedit-saveto-root-dir.html</link><pubDate>Tue, 20 Mar 2012 19:08:43 +0800</pubDate><guid>https://www.leelib.com/2012/03/20/gedit-saveto-root-dir.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2012/03/gedit.webp#center" alt="gedit">&lt;/p>
&lt;h1 id="解决方案">解决方案&lt;/h1>
&lt;p>为了能让gedit能够直接编辑不属于当前用户的文件，我们需要做如下操作：&lt;/p>
&lt;ol>
&lt;li>为gedit创建一个启动器。这个有很多方法，如果不清楚的同学可以跟我一起操作。
具体方法为：找到 &lt;strong>应用程序-附件-文本编辑器&lt;/strong> 点右键选择 &lt;strong>将此启动器添加到面板&lt;/strong>&lt;/li>
&lt;li>右键点击刚才我们创建的启动器。选择 &lt;strong>属性&lt;/strong> 将原命令 &lt;strong>gedit %U&lt;/strong> 修改为 &lt;strong>gksudo gedit %U&lt;/strong>&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>&lt;strong>gksudo&lt;/strong> 其实就是对应桌面环境下的 &lt;strong>sudo&lt;/strong> 命令.&lt;/p></description></item><item><title>网易的Ubuntu更新源</title><link>https://www.leelib.com/2012/03/19/163-ubuntu-apt-sources.html</link><pubDate>Mon, 19 Mar 2012 13:13:20 +0800</pubDate><guid>https://www.leelib.com/2012/03/19/163-ubuntu-apt-sources.html</guid><description>&lt;p>&lt;img src="https://www.leelib.com/wp-content/uploads/2012/03/ubuntu_splash.webp#center" alt="splash">&lt;/p>
&lt;h1 id="步骤">步骤&lt;/h1>
&lt;ol>
&lt;li>sudo gedit /etc/apt/sources.list
编辑你的源列表，将原来的内容全部删除并复制下面列表到文件中，然后保存列表。&lt;/li>
&lt;li>sudo apt-get update&lt;/li>
&lt;/ol>
&lt;p>等第2步完成之后你就可以打开更新管理器更新了
顺便一提 网易的更新速度真的很快，我这里下载600K/s&lt;/p></description></item></channel></rss>