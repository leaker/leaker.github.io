<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Programing"><meta property="og:site_name" content="逃避虽然可耻但有用"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="0001-01-01T00:00:00+0000"><meta property="article:modified_time" content="2024-01-10T22:26:31+0800"><title>Programing | 逃避虽然可耻但有用 </title><link rel=alternate type=application/rss+xml href=https://www.leelib.com/categories/programing/atom.xml title=逃避虽然可耻但有用><link rel=stylesheet href=/css/fika.min.2121d323520ffc9463fd9137fc47ffccf72099f83ce40f24c3f32f2cae5ff47f.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon></head><body><header><div><div id=imglogo><a href=https://www.leelib.com/><img src=/img/logo.webp alt=逃避虽然可耻但有用 title=逃避虽然可耻但有用></a></div><div id=textlogo><h1 class=site-name><a href=/ title=逃避虽然可耻但有用>逃避虽然可耻但有用</a></h1><h2 class=blog-motto>少壮不努力，一生在内地</h2></div><nav class=animated><ul><li><a href=/>主页</a></li><li><a href=/archives/index.html>归档</a></li><li><a href=/about/index.html>关于</a></li><li><a href=/disappear/index.html>消失</a></li></ul></nav></div></header><div id=container><div id=main><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/01/16/windows-dll-freelibrary-self.html title=Windows下的DLL卸载本身模块的方法 itemprop=url>Windows下的DLL卸载本身模块的方法</a></h1><p class=article-time><time datetime="2015-01-16 01:35:37 +0800 +0800" itemprop=datePublished>2015-01-16</time></p></header><div class=article-content><p>在 Windows 里 DLL 卸载自身模块是无法通过字节调用 FreeLibrary 自己来实现的。</p><h2 id=原因分析>原因分析</h2><blockquote><p>在当前线程中调用 FreeLibrary 后，当前模块就会立即被释放掉，而当前线程还没有运行结束。所以程序就运行到了一块不可访问的内存里，产生异常从而导致程序崩溃。</p></blockquote><h2 id=解决方案>解决方案</h2><blockquote><p>Windows 里面 提供了一条可以用来释放自身模块的函数 <strong>FreeLibraryAndExitThread</strong> 可以释放自身。</p></blockquote><p>函数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>VOID WINAPI FreeLibraryAndExitThread(_In_ HMODULE hLibModule, _In_ DWORD dwExitCode)
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/dll.html>Dll</a>
<a href=/tags/freelibrary.html>FreeLibrary</a>
<a href=/tags/freelibraryandexitthread.html>FreeLibraryAndExitThread</a>
<a href=/tags/windows.html>Windows</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2014/11/21/python-simple-crypt-code.html title=python代码简单加密解密工具 itemprop=url>python代码简单加密解密工具</a></h1><p class=article-time><time datetime="2014-11-21 19:13:45 +0800 +0800" itemprop=datePublished>2014-11-21</time></p></header><div class=article-content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/env python</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:license: MIT
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Copyright (C) 2012 HustMoon
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Permission is hereby granted, free of charge, to any person obtaining a copy of
</span></span></span><span style=display:flex><span><span style=color:#e6db74>this software and associated documentation files (the &#34;Software&#34;), to deal in
</span></span></span><span style=display:flex><span><span style=color:#e6db74>the Software without restriction, including without limitation the rights to
</span></span></span><span style=display:flex><span><span style=color:#e6db74>use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
</span></span></span><span style=display:flex><span><span style=color:#e6db74>of the Software, and to permit persons to whom the Software is furnished to do
</span></span></span><span style=display:flex><span><span style=color:#e6db74>so, subject to the following conditions:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>The above copyright notice and this permission notice shall be included in all
</span></span></span><span style=display:flex><span><span style=color:#e6db74>copies or substantial portions of the Software.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
</span></span></span><span style=display:flex><span><span style=color:#e6db74>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
</span></span></span><span style=display:flex><span><span style=color:#e6db74>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>SOFTWARE.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> __future__ <span style=color:#f92672>import</span> with_statement
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> zlib<span style=color:#f92672>,</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>b128encode</span>(buf, escape<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> buf: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    buf <span style=color:#f92672>=</span> bytearray(buf)
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> bytearray((len(buf) <span style=color:#f92672>*</span> <span style=color:#ae81ff>8</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>7</span>)
</span></span><span style=display:flex><span>    p, s, i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> buf:
</span></span><span style=display:flex><span>        res[i] <span style=color:#f92672>=</span> ((p <span style=color:#f92672>&lt;&lt;</span> (<span style=color:#ae81ff>8</span> <span style=color:#f92672>-</span> s) <span style=color:#f92672>|</span> (n <span style=color:#f92672>&gt;&gt;</span> s)) <span style=color:#f92672>&amp;</span>amp; <span style=color:#ae81ff>0x7F</span>) <span style=color:#f92672>|</span> <span style=color:#ae81ff>0x80</span>; i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> s <span style=color:#f92672>==</span> <span style=color:#ae81ff>7</span>:
</span></span><span style=display:flex><span>            res[i] <span style=color:#f92672>=</span> n <span style=color:#f92672>|</span> <span style=color:#ae81ff>0x80</span>; i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            p, s <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            p, s <span style=color:#f92672>=</span> n, (s <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> s <span style=color:#f92672>!=</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> s <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>and</span> p <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0x80</span>:
</span></span><span style=display:flex><span>            i <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            p <span style=color:#f92672>=</span> (p <span style=color:#f92672>&lt;&lt;</span> (<span style=color:#ae81ff>8</span> <span style=color:#f92672>-</span> s)) <span style=color:#f92672>&amp;</span>amp; <span style=color:#ae81ff>0x7F</span>
</span></span><span style=display:flex><span>        p <span style=color:#f92672>=</span> chr(p)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> escape:
</span></span><span style=display:flex><span>            p <span style=color:#f92672>=</span> p<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;string-escape&#39;</span>)
</span></span><span style=display:flex><span>        res[i:] <span style=color:#f92672>=</span> p
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> str(res)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>dcode</span>():
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;&#39;&#39;def code(__=code):
</span></span></span><span style=display:flex><span><span style=color:#e6db74> (_______)=(globals)();del((_______)[&#39;code&#39;])
</span></span></span><span style=display:flex><span><span style=color:#e6db74> if(((_______).get(&#39;__doc__&#39;))is((None))):
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (__)=(map)((ord),(__)[(339):]);(______)=[0]*(((((len)((__))+(1))*(7))/(8)));((___),(____),(_____))=((0),(0),(0))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  for((__))in((__)):
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   if((__)&lt;(128)):break
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   if((____)==(0)):((___),(____))=((__),(1))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   else:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    (______)[(_____)]=((((___)&lt;&lt;(____))|(((__)&amp;amp;(127))&gt;&gt;((7)-(____))))&amp;amp;(255));(_____)+=(1);((___),(____))=((__),(((____)+(1))%(8)))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  if((__)&lt;(128)):
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   if((____)!=(0)):
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    (__)=((((___)&lt;&lt;(____))|((__)&gt;&gt;((7)-(____))))&amp;amp;(255))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   (______)[(_____):]=[((__))]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  elif((____)!=(0)):del((______)[(_____):])
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  exec((&#39;&#39;.join((map)((chr),(______))).decode(&#39;zlib&#39;)))in((_______))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  if(((_______).get(&#39;__doc__&#39;))is((None))):(_______)[&#39;__doc__&#39;]=&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>code()
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join([c<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;string-escape&#39;</span>) <span style=color:#66d9ef>if</span> ord(c) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>128</span> <span style=color:#66d9ef>else</span> c
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> c <span style=color:#f92672>in</span> zlib<span style=color:#f92672>.</span>compress(code, <span style=color:#ae81ff>9</span>)])
</span></span><span style=display:flex><span>dcode <span style=color:#f92672>=</span> dcode()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>encode</span>(infile, outfile):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(infile, <span style=color:#e6db74>&#39;rU&#39;</span>) <span style=color:#66d9ef>as</span> fp:
</span></span><span style=display:flex><span>        code <span style=color:#f92672>=</span> fp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>rstrip(<span style=color:#e6db74>&#39;n&#39;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> b128encode(zlib<span style=color:#f92672>.</span>compress(code, <span style=color:#ae81ff>9</span>), <span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;&#39;&#39;# -*- coding: latin-1 -*-
</span></span></span><span style=display:flex><span><span style=color:#e6db74>code = &#39;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>exec(code.decode(&#39;zlib&#39;))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;&#39;&#39;</span> <span style=color:#f92672>%</span> (dcode <span style=color:#f92672>+</span> code)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(outfile, <span style=color:#e6db74>&#39;wb&#39;</span>) <span style=color:#66d9ef>as</span> fp:
</span></span><span style=display:flex><span>        fp<span style=color:#f92672>.</span>write(code)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>decode</span>(infile, outfile):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(infile, <span style=color:#e6db74>&#39;rU&#39;</span>) <span style=color:#66d9ef>as</span> fp:
</span></span><span style=display:flex><span>        code <span style=color:#f92672>=</span> fp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>rstrip(<span style=color:#e6db74>&#39;n&#39;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> code<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#34;exec(code.decode(&#39;zlib&#39;))&#34;</span>, <span style=color:#e6db74>&#34;exec(code.decode(&#39;zlib&#39;)&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;.replace(&#39;exec&#39;,&#39;fp.write&#39;).replace(&#39;in((_______))&#39;,&#39;&#39;))&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(outfile, <span style=color:#e6db74>&#39;wb&#39;</span>) <span style=color:#66d9ef>as</span> fp:
</span></span><span style=display:flex><span>        eval(compile(code, <span style=color:#e6db74>&#39;s&#39;</span>, <span style=color:#e6db74>&#39;exec&#39;</span>), {<span style=color:#e6db74>&#39;fp&#39;</span>:fp})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;-d&#39;</span>:
</span></span><span style=display:flex><span>            func <span style=color:#f92672>=</span> decode
</span></span><span style=display:flex><span>            infile, outfile <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            func <span style=color:#f92672>=</span> encode
</span></span><span style=display:flex><span>            infile, outfile <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ValueError</span>:
</span></span><span style=display:flex><span>        print <span style=color:#f92672>&gt;&gt;</span>sys<span style=color:#f92672>.</span>stderr, <span style=color:#e6db74>&#39;Usage: zipcode.py [-d] infile.py outfile.py&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>SystemExit</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    func(infile, outfile)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2014/11/21/vs2013-use-atl.html title=VS2013上直接使用ATL的注意事项 itemprop=url>VS2013上直接使用ATL的注意事项</a></h1><p class=article-time><time datetime="2014-11-21 12:15:21 +0800 +0800" itemprop=datePublished>2014-11-21</time></p></header><div class=article-content><h3 id=不再需要导入atllib库了直接包含以下头文件就可以了>不再需要导入atl.lib库了，直接包含以下头文件就可以了</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;atlbase.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;atlcom.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;atlctl.h&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div><h3 id=要使用-atlaxattachcontrol-等函数的话则必须初始化atl模块>要使用 AtlAxAttachControl 等函数的话，则必须初始化ATL模块</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>CComModule _Module;
</span></span><span style=display:flex><span>_pAtlModule <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>_Module;
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/atl.html>Atl</a>
<a href=/tags/com.html>Com</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/11/23/boost-c4996-std-copy-impl.html title="在使用boost库时发生 error C4996: 'std::_Copy_impl' 的解决方案" itemprop=url>在使用boost库时发生 error C4996: 'std::_Copy_impl' 的解决方案</a></h1><p class=article-time><time datetime="2013-11-23 13:21:44 +0800 +0800" itemprop=datePublished>2013-11-23</time></p></header><div class=article-content><p>原本的程序是控制台的。
但最近需要移植到windows下使用。
所以以MFC来做UI，代码照搬。
一面的一处代码使用了如下语句：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>boost<span style=color:#f92672>::</span>split(v, data, boost<span style=color:#f92672>::</span>is_any_of(_T(<span style=color:#e6db74>&#34;n&#34;</span>)));
</span></span></code></pre></div><p>结果编译时出现了如下错误：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>error C4996: &#39;std::_Copy_impl&#39;
</span></span></code></pre></div><p>而且是无论怎么修改都不认，差点打算重写了。</p><p>在网络中搜索了半天未果，只能自己分析。好在被我乱猜给猜对了。</p><p>我猜是因为boost的string和std的string产生了冲突而导致的。
所以添加上boost的string引用后，问题得以解决。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;boost/algorithm/string.hpp&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div><p>在此留字，希望能帮到遇到同样问题的人。</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/boost.html>Boost</a>
<a href=/tags/c4996.html>C4996</a>
<a href=/tags/is_any_of.html>Is_any_of</a>
<a href=/tags/mfc.html>Mfc</a>
<a href=/tags/split.html>Split</a>
<a href=/tags/string.html>String</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/10/29/make-socket-proxy.html title=让Socket通过HTTP代理通讯 itemprop=url>让Socket通过HTTP代理通讯</a></h1><p class=article-time><time datetime="2013-10-29 16:06:54 +0800 +0800" itemprop=datePublished>2013-10-29</time></p></header><div class=article-content><h2 id=如果socket想使用http代理需要进行下面步骤>如果socket想使用HTTP代理，需要进行下面步骤：</h2><ol><li>connect到代理服务器</li><li>send(Format(&ldquo;CONNECT %s:%s HTTP/1.1rnUser-Agent: MyApp/0.1rnrn&rdquo;, &lt;真正目标IP>, &lt;真正目标端口>)</li><li>recv 数据，并且根据数据内容判断CONNECT协议是否成功（是否有返回"HTTP/1.1 200"）</li><li>如果第3步成功了，那么这个socket就已经是通过HTTP代理来连接的了，剩下的该怎么发包收包都照旧了</li></ol></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/connect.html>Connect</a>
<a href=/tags/http.html>Http</a>
<a href=/tags/proxy.html>Proxy</a>
<a href=/tags/recv.html>Recv</a>
<a href=/tags/socket.html>Socket</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/10/04/use-zlib.html title=自己使用过程中使用zlib链接时出的错误总结 itemprop=url>自己使用过程中使用zlib链接时出的错误总结</a></h1><p class=article-time><time datetime="2013-10-04 06:37:29 +0800 +0800" itemprop=datePublished>2013-10-04</time></p></header><div class=article-content><h1 id=错误1>错误1</h1><p><strong>error LNK2019: unresolved external symbol _deflateEnd@4</strong></p><h2 id=原因1-未使用zlib的链接库>原因1: 未使用zlib的链接库</h2><ul><li>解决：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#pragma comment(lib, &#34;zlibstat.lib&#34;) </span><span style=color:#75715e>// for static lib
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#pragma comment(lib, &#34;zdll.lib&#34;) </span><span style=color:#75715e>// for dll lib
</span></span></span></code></pre></div><h2 id=原因2在使用静态库时即使包含了zlibstatlib没有定义宏zlib_winapi>原因2：在使用静态库时即使包含了zlibstat.lib没有定义宏“ZLIB_WINAPI”</h2><ul><li>解决：
在项目属性中 C/C++ -> Preprocessor -> Preprocessor Definitions 添加“ZLIB_WINAPI”
注意：这个必须在项目中添加，使用#define来添加是无效的。</li></ul><h1 id=错误2>错误2</h1><p><strong>error LNK2026: module unsafe for SAFESEH image</strong></p><h2 id=原因两个项目safeseh设置不同>原因：两个项目SAFESEH设置不同</h2><ul><li>解决：
设置项目属性: Linker -> Advanced -> [Image Has Safe Exception Handlers] = &ldquo;No&rdquo;
<em>注意：这个必须在项目中添加，使用#pragma来添加是无效的。</em></li></ul><h1 id=错误3>错误3</h1><p><strong>error LNK2005: __call_reportfault already defined in LIBCMTD.lib(invarg.obj)或类似其他的error LNK2005:</strong></p><h2 id=原因与libcmt库冲突了>原因：与libcmt库冲突了</h2><ul><li>解决：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#pragma comment(linker, &#34;/NODEFAULTLIB:libcmt.lib&#34;)
</span></span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/comment.html>Comment</a>
<a href=/tags/lib.html>Lib</a>
<a href=/tags/link.html>Link</a>
<a href=/tags/lnk2005.html>LNK2005</a>
<a href=/tags/pragma.html>Pragma</a>
<a href=/tags/safeseh.html>SAFESEH</a>
<a href=/tags/static.html>Static</a>
<a href=/tags/zlib.html>Zlib</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/10/03/error-lnk2026-module-unsafe-for-safeseh-image.html title="error LNK2026: module unsafe for SAFESEH image 解决方案" itemprop=url>error LNK2026: module unsafe for SAFESEH image 解决方案</a></h1><p class=article-time><time datetime="2013-10-03 15:21:16 +0800 +0800" itemprop=datePublished>2013-10-03</time></p></header><div class=article-content><h1 id=解决方案>解决方案</h1><p>下面两种随便选一种</p><h2 id=方法1>方法1</h2><p>去掉项目设置中: <strong>Linker -> Advanced -> [Image Has Safe Exception Handlers] = &ldquo;No&rdquo;</strong></p><h2 id=方法2>方法2</h2><p>直接在代码中:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#pragma comment(linker, &#34;/SAFESEH:NO&#34;)
</span></span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/advanced.html>Advanced</a>
<a href=/tags/c.html>C</a>
<a href=/tags/error.html>Error</a>
<a href=/tags/image.html>Image</a>
<a href=/tags/linker.html>Linker</a>
<a href=/tags/lnk2026.html>LNK2026</a>
<a href=/tags/module.html>Module</a>
<a href=/tags/safeseh.html>SAFESEH</a>
<a href=/tags/unsafe.html>Unsafe</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/10/03/how-to-use-crt.html title="如何用正确的 C 运行时 (CRT) 库链接" itemprop=url>如何用正确的 C 运行时 (CRT) 库链接</a></h1><p class=article-time><time datetime="2013-10-03 04:13:52 +0800 +0800" itemprop=datePublished>2013-10-03</time></p></header><div class=article-content><h1 id=概要>概要</h1><p>有六种类型的可重用的库：</p><blockquote><p>静态单线程库 （调试/发行版）
静态多线程的库 （调试/发行版）
动态链接库 (DLL)(Debug/Release)
注意每个库都有一个调试版本和发布版本。</p></blockquote><pre><code>Reusable Library            Switch    Library    Macro(s) Defined
--------------------------- --------- ---------- ----------------------
Single Threaded             /ML       LIBC       (none)
Static MultiThread          /MT       LIBCMT     _MT
Dynamic Link (DLL)          /MD       MSVCRT     _MT and _DLL
Debug Single Threaded       /MLd      LIBCD      _DEBUG
Debug Static MultiThread    /MTd      LIBCMTD    _DEBUG and _MT
Debug Dynamic Link (DLL)    /MDd      MSVCRTD    _DEBUG, _MT, and _DLL
</code></pre><h2 id=下面的代码可以使用可重用库的头文件中以确保一致使用正确的编译器开关>下面的代码可以使用可重用库的头文件中以确保一致使用正确的编译器开关：</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// MyReusableStaticSingleThreadReleaseLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if defined(_MT) || defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /ML compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// MyReusableStaticMultithreadReleaseLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if !defined(_MT) || defined(_DLL) || defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /MT compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// MyReusableDynamicLinkReleaseLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if !defined(_MT) || !defined(_DLL) || defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /MD compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// MyReusableStaticSingleThreadDebugLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if defined(_MT) || !defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /MLd compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// MyReusableStaticMultithreadDebugLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if !defined(_MT) || defined(_DLL) || !defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /MTd compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// MyReusableDynamicLinkDebugLibrary.h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#if !defined(_MT) || !defined(_DLL) || !defined(_DEBUG)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>#error The /MDd compiler switch is required.
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span></code></pre></div><p>原文：<a href=http://support.microsoft.com/kb/140584/zh-cn>http://support.microsoft.com/kb/140584/zh-cn</a></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/07/02/python-zlib-trans-c.html title=python的zlib压缩解压缩对应的C语言方式 itemprop=url>python的zlib压缩解压缩对应的C语言方式</a></h1><p class=article-time><time datetime="2013-07-02 15:47:00 +0800 +0800" itemprop=datePublished>2013-07-02</time></p></header><div class=article-content><h1 id=压缩>压缩</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>enData <span style=color:#f92672>=</span> zlib<span style=color:#f92672>.</span>compress(data)[<span style=color:#ae81ff>2</span>:<span style=color:#f92672>-</span><span style=color:#ae81ff>4</span>]
</span></span></code></pre></div><p>对应：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#a6e22e>compress2</span>(dstbuf, <span style=color:#f92672>&amp;</span>dstLen, strSrc, srcLen, <span style=color:#ae81ff>6</span>);
</span></span></code></pre></div><h1 id=解压>解压</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>deData <span style=color:#f92672>=</span> zlib<span style=color:#f92672>.</span>decompress(enData, <span style=color:#f92672>-</span>zlib<span style=color:#f92672>.</span>MAX_WBITS)
</span></span></code></pre></div><p>对应：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>gzipInflate</span>( <span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>string<span style=color:#f92672>&amp;</span> compressedBytes, std<span style=color:#f92672>::</span>string<span style=color:#f92672>&amp;</span> uncompressedBytes ) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ( compressedBytes.<span style=color:#a6e22e>size</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> ) {
</span></span><span style=display:flex><span>        uncompressedBytes <span style=color:#f92672>=</span> compressedBytes ;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> true ;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    uncompressedBytes.<span style=color:#a6e22e>clear</span>() ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> full_length <span style=color:#f92672>=</span> compressedBytes.<span style=color:#a6e22e>size</span>() ;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> half_length <span style=color:#f92672>=</span> compressedBytes.<span style=color:#a6e22e>size</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> uncompLength <span style=color:#f92672>=</span> full_length ;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> uncomp <span style=color:#f92672>=</span> (<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span>) <span style=color:#a6e22e>calloc</span>( <span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>char</span>), uncompLength );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    z_stream strm;
</span></span><span style=display:flex><span>    strm.next_in <span style=color:#f92672>=</span> (Bytef <span style=color:#f92672>*</span>) compressedBytes.<span style=color:#a6e22e>c_str</span>();
</span></span><span style=display:flex><span>    strm.avail_in <span style=color:#f92672>=</span> compressedBytes.<span style=color:#a6e22e>size</span>() ;
</span></span><span style=display:flex><span>    strm.total_out <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    strm.zalloc <span style=color:#f92672>=</span> Z_NULL;
</span></span><span style=display:flex><span>    strm.zfree <span style=color:#f92672>=</span> Z_NULL;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bool</span> done <span style=color:#f92672>=</span> false ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//if (inflateInit2(&amp;strm, (16+MAX_WBITS)) != Z_OK)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>inflateInit2</span>(<span style=color:#f92672>&amp;</span>strm, <span style=color:#f92672>-</span>MAX_WBITS) <span style=color:#f92672>!=</span> Z_OK)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>free</span>( uncomp );
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>done) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// If our output buffer is too small
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (strm.total_out <span style=color:#f92672>&gt;=</span> uncompLength ) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Increase size of output buffer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> uncomp2 <span style=color:#f92672>=</span> (<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span>) <span style=color:#a6e22e>calloc</span>( <span style=color:#66d9ef>sizeof</span>(<span style=color:#66d9ef>char</span>), uncompLength <span style=color:#f92672>+</span> half_length );
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>memcpy</span>( uncomp2, uncomp, uncompLength );
</span></span><span style=display:flex><span>            uncompLength <span style=color:#f92672>+=</span> half_length ;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>free</span>( uncomp );
</span></span><span style=display:flex><span>            uncomp <span style=color:#f92672>=</span> uncomp2 ;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        strm.next_out <span style=color:#f92672>=</span> (Bytef <span style=color:#f92672>*</span>) (uncomp <span style=color:#f92672>+</span> strm.total_out);
</span></span><span style=display:flex><span>        strm.avail_out <span style=color:#f92672>=</span> uncompLength <span style=color:#f92672>-</span> strm.total_out;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Inflate another chunk.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>int</span> err <span style=color:#f92672>=</span> <span style=color:#a6e22e>inflate</span> (<span style=color:#f92672>&amp;</span>strm, Z_SYNC_FLUSH);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (err <span style=color:#f92672>==</span> Z_STREAM_END) done <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (err <span style=color:#f92672>!=</span> Z_OK)  {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>inflateEnd</span> (<span style=color:#f92672>&amp;</span>strm) <span style=color:#f92672>!=</span> Z_OK) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>free</span>( uncomp );
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ( <span style=color:#66d9ef>size_t</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; i<span style=color:#f92672>&lt;</span>strm.total_out; <span style=color:#f92672>++</span>i ) {
</span></span><span style=display:flex><span>        uncompressedBytes <span style=color:#f92672>+=</span> uncomp[ i ];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>free</span>( uncomp );
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> true ;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/c.html>C</a>
<a href=/tags/compress.html>Compress</a>
<a href=/tags/decompress.html>Decompress</a>
<a href=/tags/python.html>Python</a>
<a href=/tags/zlib.html>Zlib</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/07/01/windows-use-zlib-link-error.html title="Windows下编译使用zlib库的程序时出现“无法解析的外部符号 _compress”解决方案" itemprop=url>Windows下编译使用zlib库的程序时出现“无法解析的外部符号 _compress”解决方案</a></h1><p class=article-time><time datetime="2013-07-01 05:29:47 +0800 +0800" itemprop=datePublished>2013-07-01</time></p></header><div class=article-content><h1 id=错误描述>错误描述</h1><p><strong>error LNK2019: unresolved external symbol _compress referenced</strong></p><h1 id=解决方案>解决方案</h1><p>在 <strong>#include &lt;zlib.h></strong> 之前加上 <strong>#define ZLIB_WINAPI</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define ZLIB_WINAPI
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;zlib.h&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/compress.html>Compress</a>
<a href=/tags/windows.html>Windows</a>
<a href=/tags/zlib.html>Zlib</a></div></div></footer></article><nav id=page-nav class=clearfix><a class="extend first" aria-label=First rel=first role=button href=/categories/programing.html><span></span>首页</a>
<a class="extend prev" aria-label=Prev rel=prev role=button href=/categories/programing.html><span></span>上一页</a>
<a class=page-number href=/categories/programing.html aria-label="Page 1" role=button>1</a>
<a class="page-number current" aria-label="Page 2" role=button>2</a>
<a class=page-number href=/categories/programing/page/3.html aria-label="Page 3" role=button>3</a>
<a class="extend last" aria-label=Last rel=last role=button href=/categories/programing/page/3.html>尾页<span></span></a>
<a class="extend next" aria-label=Next rel=next role=button href=/categories/programing/page/3.html>下一页<span></span></a></nav></div><div id=asidepart><aside class=clearfix><p class=asidetitle>文章分类</p><div class=categorieslist><ul><li><span class=count>1</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/deploy.html title=deploy>deploy</a></li><li><span class=count>1</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/interesting.html title=interesting>interesting</a></li><li><span class=count>29</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/linux.html title=linux>linux</a></li><li><span class=count>6</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/notices.html title=notices>notices</a></li><li><span class=count>28</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/programing.html title=programing>programing</a></li><li><span class=count>1</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/sites.html title=sites>sites</a></li><li><span class=count>10</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/summarys.html title=summarys>summarys</a></li><li><span class=count>2</span>
<svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/works.html title=works>works</a></li></ul></div></aside><aside class=clearfix><p class=asidetitle>文章标签</p><div class=tagslist><ul class=clearfix><li><a href=/tags/c.html title=c>c<sup>3</sup></a></li><li><a href=/tags/centos.html title=centos>centos<sup>5</sup></a></li><li><a href=/tags/compress.html title=compress>compress<sup>2</sup></a></li><li><a href=/tags/conf.html title=conf>conf<sup>2</sup></a></li><li><a href=/tags/css.html title=css>css<sup>2</sup></a></li><li><a href=/tags/gcc.html title=gcc>gcc<sup>2</sup></a></li><li><a href=/tags/git.html title=git>git<sup>3</sup></a></li><li><a href=/tags/html.html title=html>html<sup>2</sup></a></li><li><a href=/tags/https.html title=https>https<sup>2</sup></a></li><li><a href=/tags/hugo.html title=hugo>hugo<sup>2</sup></a></li><li><a href=/tags/install.html title=install>install<sup>4</sup></a></li><li><a href=/tags/kernel.html title=kernel>kernel<sup>3</sup></a></li><li><a href=/tags/layout.html title=layout>layout<sup>2</sup></a></li><li><a href=/tags/libc.html title=libc>libc<sup>2</sup></a></li><li><a href=/tags/linux.html title=linux>linux<sup>12</sup></a></li><li><a href=/tags/ln.html title=ln>ln<sup>2</sup></a></li><li><a href=/tags/make.html title=make>make<sup>3</sup></a></li><li><a href=/tags/mud.html title=mud>mud<sup>2</sup></a></li><li><a href=/tags/python.html title=python>python<sup>3</sup></a></li><li><a href=/tags/safeseh.html title=safeseh>safeseh<sup>2</sup></a></li><li><a href=/tags/style.html title=style>style<sup>2</sup></a></li><li><a href=/tags/sudo.html title=sudo>sudo<sup>2</sup></a></li><li><a href=/tags/ubuntu.html title=ubuntu>ubuntu<sup>8</sup></a></li><li><a href=/tags/windows.html title=windows>windows<sup>4</sup></a></li><li><a href=/tags/yum.html title=yum>yum<sup>4</sup></a></li><li><a href=/tags/zlib.html title=zlib>zlib<sup>4</sup></a></li></ul></div></aside><div class=rsspart><a href=/atom.xml class=btn target=_blank title=rss>RSS 订阅</a></div></div></div><footer><div id=footer><div class=line><div class=author></div></div><section class=info><p>Hello, this is leaker's blog in github.<br>Leaker: "Living without an aim is like sailing without a compass."</p></section><div class=social-font class=clearfix><a href=mailto:admin@leelib.com target=_blank class=icon-email title="Email Me"></a></div><p class=copyright>Powered by <a rel=noopener title=Hugo href=https://gohugo.io target=_blank>Hugo</a> and Theme by <a rel=noopener title=Fika href=https://github.com/leaker/hugo-theme-fika target=_blank>Fika</a> © 2022
<a href=/about/index.html target=_blank title=leaker>leaker</a></p></div></footer></body></html>