<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Programing"><meta property="og:site_name" content="逃避虽然可耻但有用"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="0001-01-01T00:00:00+0000"><meta property="article:modified_time" content="2024-01-10T22:26:31+0800"><title>Programing | 逃避虽然可耻但有用 </title><link rel=alternate type=application/rss+xml href=https://www.leelib.com/categories/programing/atom.xml title=逃避虽然可耻但有用><link rel=stylesheet href=/css/fika.min.d4d1dbbc97a75998b5770b2bc63b2fe6a94fb79707638aa3558722af861ab018.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon></head><body><header><div><div id=imglogo><a href=https://www.leelib.com/><img src=/img/logo.webp alt=逃避虽然可耻但有用 title=逃避虽然可耻但有用></a></div><div id=textlogo><h1 class=site-name><a href=/ title=逃避虽然可耻但有用>逃避虽然可耻但有用</a></h1><h2 class=blog-motto>少壮不努力，一生在内地</h2></div><nav class=animated><ul><li><a href=/>主页</a></li><li><a href=/archives/index.html>归档</a></li><li><a href=/about/index.html>关于</a></li><li><a href=/disappear/index.html>消失</a></li></ul></nav></div></header><div id=container><div id=main><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2024/01/10/windows-runasinvoker.html title="Windows 系统内禁止某些应用以管理员程序运行(RunAsInvoker)" itemprop=url>Windows 系统内禁止某些应用以管理员程序运行(RunAsInvoker)</a></h1><p class=article-time><time datetime="2024-01-10 22:26:31 +0800 +0800" itemprop=datePublished>2024-01-10</time></p></header><div class=article-content><p>在 Windows 调试一些程序的时候，有可能会遇到程序本身编译为始终以管理员身份运行的。而这些程序在拿到管理员身份的时候会启动一些保护以检测自己是否被调试注入等等。</p><p>而我们不希望这些程序以管理员身份启动。</p><h3 id=如果是直接启动该程序我们可以使用命令>如果是直接启动该程序，我们可以使用命令：</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>cmd /min /C <span style=color:#e6db74>&#34;set __COMPAT_LAYER=RUNASINVOKER &amp;&amp; start &#34;&#34; &#34;</span>(your app path)<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>替换 <strong>(your app path)</strong> 部分为你们的程序路径</p><h3 id=如果经常需要使用的话还可以把该命令集成到-windows-右键菜单里通过注册表>如果经常需要使用的话，还可以把该命令集成到 Windows 右键菜单里，通过注册表</h3><p><em>RunWithoutPrivilegeElevation.reg</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-reg data-lang=reg><span style=display:flex><span>Windows Registry Editor Version 5.00
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[</span>HKEY_CLASSES_ROOT<span style=color:#66d9ef>\*\shell\Run Without Privilege Elevation]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Run Without Privilege Elevation&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[</span>HKEY_CLASSES_ROOT<span style=color:#66d9ef>\*\shell\Run Without Privilege Elevation\command]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cmd /min /C \&#34;set __COMPAT_LAYER=RUNASINVOKER &amp;&amp; start \&#34;\&#34; \&#34;%1\&#34;\&#34;&#34;</span>
</span></span></code></pre></div><p>点我下载：<a href=/files/2024/01/RunWithoutPrivilegeElevation.reg>RunWithoutPrivilegeElevation.reg</a></p><p>但有时该程序是被另外的程序启动的，这时我们就无法执行命令来启动了。
不过不用担心，Windows 还给了我们另外的方案</p><h3 id=为程序设置-compatibility-flags>为程序设置 Compatibility Flags</h3><p><em>DisableAppRunAsAdministrator.reg</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-reg data-lang=reg><span style=display:flex><span>Windows Registry Editor Version 5.00
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[</span>HKEY_CURRENT_USER<span style=color:#66d9ef>\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>&#34;(your app path)&#34;</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;RunAsInvoker&#34;</span>
</span></span></code></pre></div><p>替换 <strong>(your app path)</strong> 部分为你们的程序路径</p><p>设置好后，无论是谁启动的该程序，程序都无法以最高的管理员身份运行了。</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/windows.html>Windows</a>
<a href=/tags/bat.html>Bat</a>
<a href=/tags/runasinvoker.html>Runasinvoker</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2023/03/29/zip-tar-name-fixer.html title="zip 和 tar 包内乱码文件名修正工具" itemprop=url>zip 和 tar 包内乱码文件名修正工具</a></h1><p class=article-time><time datetime="2023-03-29 03:15:09 +0700 +0700" itemprop=datePublished>2023-03-29</time></p></header><div class=article-content><p>收到别人发来的压缩包，结果解压出来文件名是乱码。
这种情况在别人和自己使用不同的操作系统平台以及编码时经常发生，为了解决这一问题。自己编写了使用指定编码解压文件的程序。</p><p><em>zip_name_fixer.py</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -*- coding: utf-8 -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> zipfile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ZIP filenames fixer&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;path&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;path to the ZIP file.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;encoding&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;encoding of the filenames inside the ZIP file.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-o&#39;</span>, <span style=color:#e6db74>&#39;--output&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;output directory for the extracted files.&#39;</span>, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-p&#39;</span>, <span style=color:#e6db74>&#39;--password&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;decompression password for the ZIP file.&#39;</span>, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> zipfile<span style=color:#f92672>.</span>ZipFile(args<span style=color:#f92672>.</span>path, <span style=color:#e6db74>&#39;r&#39;</span>, metadata_encoding<span style=color:#f92672>=</span>args<span style=color:#f92672>.</span>encoding) <span style=color:#66d9ef>as</span> zip:
</span></span><span style=display:flex><span>        zip<span style=color:#f92672>.</span>extractall(path<span style=color:#f92672>=</span>args<span style=color:#f92672>.</span>output, pwd<span style=color:#f92672>=</span>args<span style=color:#f92672>.</span>password<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p>点我下载：<a href=/files/tools/zip_name_fixer.py>zip_name_fixer.py</a></p><p>使用方式： python zip_name_fixer.py [-h] [-o OUTPUT] [-p PASSWORD] path encoding</p><p>其中 <strong>encoding</strong> 就是python中常用的编码代码，例如： <em>gbk</em>、<em>cp437</em> 等等&mldr;</p><p>同时顺手还写了一个针对 tar.gz 压缩包的。</p><p><em>tar_name_fixer.py</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -*- coding: utf-8 -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> tarfile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tar.gz filenames fixer&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;path&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;path to the tar.gz file.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;encoding&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;encoding of the filenames inside the tar.gz file.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-o&#39;</span>, <span style=color:#e6db74>&#39;--output&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;output directory for the extracted files.&#39;</span>, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> tarfile<span style=color:#f92672>.</span>open(args<span style=color:#f92672>.</span>path, <span style=color:#e6db74>&#39;r:gz&#39;</span>, encoding<span style=color:#f92672>=</span>args<span style=color:#f92672>.</span>encoding) <span style=color:#66d9ef>as</span> tar:
</span></span><span style=display:flex><span>        tar<span style=color:#f92672>.</span>extractall(path<span style=color:#f92672>=</span>args<span style=color:#f92672>.</span>output)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p>点我下载：<a href=/files/tools/tar_name_fixer.py>tar_name_fixer.py</a></p><p>使用方式： python tar_name_fixer.py [-h] [-o OUTPUT] path encoding</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/zip.html>Zip</a>
<a href=/tags/tar.html>Tar</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2023/03/29/encoding-line-ending-converter.html title=文本编码与换行符转换器 itemprop=url>文本编码与换行符转换器</a></h1><p class=article-time><time datetime="2023-03-29 03:03:40 +0700 +0700" itemprop=datePublished>2023-03-29</time></p></header><div class=article-content><p>当遇到某人发来的文本內容内不是标准 utf-8 编码时，可以使用本程序来进行转换。</p><p>转换时遇到文本行尾使用了Windows专用的 <strong>CRLF</strong> 换行符时，也会将文本行尾统一更换为 <strong>LF</strong>。这样的好处是可以缩小文本文件的空间占用，并且可以保证该文件可以在基于Unix和Linux的操作系统以相同的格式显示。</p><p><em>encoding_line_ending_converter.py</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -*- coding: utf-8 -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Text Encoding and Line Ending Converter&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;path&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;directory to be traversed and processed.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;encoding&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;encoding of the text file.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-e&#39;</span>, <span style=color:#e6db74>&#39;--extensions&#39;</span>, type<span style=color:#f92672>=</span>str, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;only process specified file extensions. use &#34;|&#34; as the separator, for example: &#34;.txt|.log|.html&#34;&#39;</span>, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-q&#39;</span>, <span style=color:#e6db74>&#39;--quiet&#39;</span>, action<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;store_true&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;do not output information during processing.&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#34;-v&#34;</span>, <span style=color:#e6db74>&#34;--verbose&#34;</span>, action<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;store_true&#34;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;increase output verbosity&#34;</span>)
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>    extensions <span style=color:#f92672>=</span> tuple(args<span style=color:#f92672>.</span>extensions<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;|&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    processed_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> root, _, files <span style=color:#f92672>in</span> os<span style=color:#f92672>.</span>walk(args<span style=color:#f92672>.</span>path):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> file_name <span style=color:#f92672>in</span> files:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> len(extensions) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> file_name<span style=color:#f92672>.</span>endswith(extensions):
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> trans(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(root, file_name), args<span style=color:#f92672>.</span>encoding, args<span style=color:#f92672>.</span>quiet, args<span style=color:#f92672>.</span>verbose):
</span></span><span style=display:flex><span>                    processed_count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> args<span style=color:#f92672>.</span>quiet:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>processed_count<span style=color:#e6db74>}</span><span style=color:#e6db74> files have been processed.&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>trans</span>(file_path, file_encoding, quiet, verbose) <span style=color:#f92672>-&gt;</span> bool:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Convert file encoding and line endings.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># check file encoding</span>
</span></span><span style=display:flex><span>    encoding <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;utf-8&#39;</span>
</span></span><span style=display:flex><span>    content <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(file_path, <span style=color:#e6db74>&#39;r&#39;</span>, encoding<span style=color:#f92672>=</span>encoding) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            content <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>read()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>UnicodeDecodeError</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(file_path, <span style=color:#e6db74>&#39;rb&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                content <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(file_encoding)
</span></span><span style=display:flex><span>                encoding <span style=color:#f92672>=</span> file_encoding
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>UnicodeDecodeError</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> quiet:
</span></span><span style=display:flex><span>                    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>file_path<span style=color:#e6db74>}</span><span style=color:#e6db74> the file encoding is not </span><span style=color:#e6db74>{</span>file_encoding<span style=color:#e6db74>}</span><span style=color:#e6db74>.&#39;</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># determine if a file uses LF line endings.</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\r</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>in</span> content:
</span></span><span style=display:flex><span>        <span style=color:#75715e># convert CRLF line endings to LF.</span>
</span></span><span style=display:flex><span>        content <span style=color:#f92672>=</span> content<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>&#39;</span>, <span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># write content</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(file_path, <span style=color:#e6db74>&#39;w&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>, newline<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            f<span style=color:#f92672>.</span>write(content)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> quiet:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>file_path<span style=color:#e6db74>}</span><span style=color:#e6db74> the file encoding and line endings have been converted to UTF-8 and LF.&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> encoding <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;utf-8&#39;</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># write content</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>with</span> open(file_path, <span style=color:#e6db74>&#39;w&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>, newline<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>            f<span style=color:#f92672>.</span>write(content)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> quiet:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>file_path<span style=color:#e6db74>}</span><span style=color:#e6db74> the file encoding has been converted to UTF-8.&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> quiet <span style=color:#f92672>and</span> verbose:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>file_path<span style=color:#e6db74>}</span><span style=color:#e6db74> the file is now encoded in UTF-8 with LF line endings.&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p>点我下载：<a href=/files/tools/encoding_line_ending_converter.py>encoding_line_ending_converter.py</a></p><p><em>> python encoding_line_ending_converter.py -h</em></p><pre tabindex=0><code>usage: encoding_line_ending_converter.py [-h] [-e EXTENSIONS] [-q] [-v] path encoding

Text Encoding and Line Ending Converter

positional arguments:
  path                  directory to be traversed and processed.
  encoding              encoding of the text file.

options:
  -h, --help            show this help message and exit
  -e EXTENSIONS, --extensions EXTENSIONS
                        only process specified file extensions. use &#34;|&#34; as the separator, for example: &#34;.txt|.log|.html&#34;
  -q, --quiet           do not output information during processing.
  -v, --verbose         increase output verbosity
</code></pre><p>其中 <strong>encoding</strong> 就是python中常用的编码代码，例如： <em>gbk</em>、<em>cp437</em> 等等&mldr;</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/encoding.html>Encoding</a>
<a href=/tags/gbk.html>Gbk</a>
<a href=/tags/utf8.html>Utf8</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2022/10/12/tailwind-box-layout.html title="基于 Tailwind CSS 的 Box 布局" itemprop=url>基于 Tailwind CSS 的 Box 布局</a></h1><p class=article-time><time datetime="2022-10-12 20:45:05 +0800 +0800" itemprop=datePublished>2022-10-12</time></p></header><div class=article-content><h1 id=header-content-footer-布局>Header Content Footer 布局</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!doctype html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width, initial-scale=1.0&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;Tailwind CSS Box Layout&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.tailwindcss.com&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/tailwindcss&#34;</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#f92672>html</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>body</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>font-family</span>: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, <span style=color:#66d9ef>monospace</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#c9d1d9</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#0d1117</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;box&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex flex-col h-screen justify-between&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>header</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;border-b p-5&#34;</span>&gt;Header&lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>main</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex flex-1 flex-col justify-center items-center mb-auto h-auto bg-gray-900&#34;</span>&gt;Content&lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>footer</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex justify-center items-center border-t border-gray-800 p-6&#34;</span>&gt;Footer&lt;/<span style=color:#f92672>footer</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p><a href=https://codepen.io/leaker/pen/WNJLaQd>线上预览</a></p><h1 id=预览>预览</h1><p><img src=/images/2022/10/box-layout.webp alt></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/html.html>Html</a>
<a href=/tags/css.html>Css</a>
<a href=/tags/style.html>Style</a>
<a href=/tags/layout.html>Layout</a>
<a href=/tags/tailwind.html>Tailwind</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2022/05/14/vs2022-build-opencv-with-cuda-for-python.html title="使用 Visual Studio 2022 为 python 编译 OpenCV 加 CUDA 支持" itemprop=url>使用 Visual Studio 2022 为 python 编译 OpenCV 加 CUDA 支持</a></h1><p class=article-time><time datetime="2022-05-14 09:59:11 +0800 +0800" itemprop=datePublished>2022-05-14</time></p></header><div class=article-content><h1 id=准备工作>准备工作</h1><ul><li>安装 Scoop</li><li>安装 Visual Studio 2022</li><li>安装 Ninja <strong>v1.11.1</strong></li><li>安装 Python <strong>v3.10</strong> 和 Numpy</li><li>安装 wget 和 7zip</li><li>安装 Cuda SDK <strong>v11.7</strong></li><li>一键下载 OpenCV <strong>4.6.0</strong> 源码并编译</li><li>部署</li><li>测试 OpenCV</li></ul><h1 id=安装-scoop>安装 Scoop</h1><p>打开 <strong>PowerShell</strong> 后执行：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
</span></span><span style=display:flex><span>Invoke-WebRequest get.scoop.sh | Invoke-Expression
</span></span></code></pre></div><p>安装参考： <a href=https://scoop.sh>https://scoop.sh</a></p><h1 id=安装-visual-studio-2022>安装 Visual Studio 2022</h1><ol><li>从 <a href=https://visualstudio.microsoft.com>https://visualstudio.microsoft.com</a> 下载你喜欢的版本，推荐免费的 <strong>Community</strong> 版本</li><li>安装 <strong>使用C++的桌面开发</strong> 工作负荷<blockquote><p>使用所选工具(包括 MSVC、CLang、CMake 或 MSBuild)生成适用于 Windows 的现代 C++ 应用</p></blockquote></li></ol><h1 id=安装-ninja-v1111>安装 Ninja <strong>v1.11.1</strong></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>scoop install ninja@1.11.1
</span></span></code></pre></div><h1 id=安装-python-v310-和-numpy>安装 Python <strong>v3.10</strong> 和 Numpy</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>scoop bucket add versions
</span></span><span style=display:flex><span>scoop install python310
</span></span><span style=display:flex><span>pip install numpy
</span></span></code></pre></div><h1 id=安装-wget-和-7zip>安装 wget 和 7zip</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>scoop install wget 7zip
</span></span></code></pre></div><h1 id=安装-cuda-sdk--v117>安装 Cuda SDK <strong>v11.7</strong></h1><p>安装流程： <a href=https://docs.nvidia.com/cuda/cuda-installation-guide-microsoft-windows/index.html#installing-cuda-development-tools>https://docs.nvidia.com/cuda/cuda-installation-guide-microsoft-windows/index.html#installing-cuda-development-tools</a></p><h1 id=一键下载-opencv-460-源码并编译>一键下载 opencv <strong>4.6.0</strong> 源码并编译</h1><p><em>download_and_build_opencv.bat</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>@<span style=color:#66d9ef>ECHO</span> OFF
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- Downloading OpenCV Source Code --
</span></span><span style=display:flex><span>wget https://github.com/opencv/opencv/archive/refs/tags/4.6.0.zip -O opencv-4.6.0.zip
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span>7z x -y opencv-4.6.0.zip
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span>wget https://github.com/opencv/opencv_contrib/archive/refs/tags/4.6.0.zip -O opencv_contrib-4.6.0.zip
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span>7z x -y opencv_contrib-4.6.0.zip
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> <span style=color:#e6db74>&#34;USERHOME=</span>%USERPROFILE:\=/%<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> OPENCV_SRC_DIR=%cd%/opencv-4.6.0
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> OPENCV_CONTRIB_SRC_DIR=%cd%/opencv_contrib-4.6.0
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> OPENCV_BUILD_DIR=%cd%/opencv-build
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> SCOOP_ROOT=%USERHOME%/scoop
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> PYTHON_PATH=%SCOOP_ROOT%/apps/python310/current
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> PYTHON_LIBRARY=%PYTHON_PATH%/libs/python310.lib
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> PYTHON_VERSION=3.10
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> CUDA_SDK_DIR=<span style=color:#e6db74>&#34;C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v11.7&#34;</span>
</span></span><span style=display:flex><span>@<span style=color:#75715e>REM CUDA_ARCH=8.6 for GeForce RTX 3080 Ti</span>
</span></span><span style=display:flex><span>@<span style=color:#75715e>REM Choice value for your GPU with: https://developer.nvidia.com/cuda-gpus</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> CUDA_ARCH=8.6
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- Starting OpenCV Configuration --
</span></span><span style=display:flex><span><span style=color:#66d9ef>call</span> <span style=color:#e6db74>&#34;C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Auxiliary/Build/vcvars64.bat&#34;</span>
</span></span><span style=display:flex><span>@<span style=color:#75715e>REM If you want to use the Visual Studio 2019 MSVC:</span>
</span></span><span style=display:flex><span>@<span style=color:#75715e>REM call &#34;C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Auxiliary/Build/vcvars64.bat&#34; -vcvars_ver=14.29</span>
</span></span><span style=display:flex><span>cmake <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>S%OPENCV_SRC_DIR% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>B%OPENCV_BUILD_DIR% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCMAKE_INSTALL_PREFIX=%OPENCV_BUILD_DIR%/install <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DOPENCV_EXTRA_MODULES_PATH=%OPENCV_CONTRIB_SRC_DIR%/modules <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON3_EXECUTABLE=%PYTHON_PATH%/python.exe <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON3_INCLUDE_DIR=%PYTHON_PATH%/include <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON3_LIBRARY=%PYTHON_LIBRARY% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON3_NUMPY_INCLUDE_DIRS=%PYTHON_PATH%/Lib/site-packages/numpy/core/include <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON3_PACKAGES_PATH=%PYTHON_PATH%/Lib/site-packages <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON_INCLUDE_DIRS=%PYTHON_PATH%/include <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DPYTHON_LIBRARIES=%PYTHON_LIBRARY% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCUDA_TOOLKIT_ROOT_DIR=%CUDA_SDK_DIR% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DENABLE_FAST_MATH=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCUDA_FAST_MATH=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DWITH_CUDA=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DWITH_CUDNN=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DOPENCV_DNN_CUDA=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCUDA_ARCH_BIN=%CUDA_ARCH% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCUDA_ARCH_PTX=%CUDA_ARCH% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DWITH_OPENGL=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DWITH_GSTREAMER=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DWITH_FREETYPE=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_opencv_python3=ON <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCMAKE_CONFIGURATIONS_TYPES=Release <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DCMAKE_BUILD_TYPE=Release <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DOPENCV_PYTHON3_VERSION=%PYTHON_VERSION% <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_TESTS=OFF <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_PERF_TESTS=OFF <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_JAVA=OFF <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_opencv_objc_bindings_generator=OFF <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_opencv_js=OFF <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>GNinja <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff>-</span>DBUILD_opencv_world=ON
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- OpenCV Configuration has finished, press any key to proceeding to build phase... --
</span></span><span style=display:flex><span><span style=color:#66d9ef>PAUSE</span> &gt; NUL
</span></span><span style=display:flex><span>cmake --build %OPENCV_BUILD_DIR% --target install
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- OpenCV Build has finished, press any key to install... --
</span></span><span style=display:flex><span><span style=color:#66d9ef>PAUSE</span> &gt; NUL
</span></span><span style=display:flex><span>pip uninstall opencv-python opencv-contrib-python
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>COPY</span> %OPENCV_BUILD_DIR%/lib/python3/cv2.cp310-win_amd64.pyd %PYTHON_PATH%/Lib/site-packages/cv2.cp310-win_amd64.pyd /Y
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>COPY</span> %OPENCV_BUILD_DIR%/install/x64/vc17/bin/*.dll %PYTHON_PATH%/Scripts /Y
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span>pip install opencv-contrib-python
</span></span><span style=display:flex><span><span style=color:#66d9ef>IF</span> %ERRORLEVEL% <span style=color:#f92672>NEQ</span> 0 <span style=color:#66d9ef>GOTO</span> :error
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- all finished, press any key to exit... --
</span></span><span style=display:flex><span><span style=color:#66d9ef>PAUSE</span> &gt; NUL
</span></span><span style=display:flex><span><span style=color:#66d9ef>GOTO</span> :EOF
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:error
</span></span><span style=display:flex><span><span style=color:#66d9ef>ECHO</span> -- Error has occurred!!! press any key to exit... --
</span></span><span style=display:flex><span><span style=color:#66d9ef>PAUSE</span> &gt; NUL
</span></span></code></pre></div><p>点我下载：<a href=/files/2022/05/download_and_build_opencv.bat>download_and_build_opencv.bat</a></p><h1 id=部署>部署</h1><ol><li>卸载 <strong>opencv-python opencv-contrib-python</strong></li><li>拷贝 <strong>%OPENCV_BUILD_DIR%/lib/python3/cv2.cp310-win_amd64.pyd</strong> 到 <strong>%PYTHON_PATH%/Lib/site-packages</strong> 目录</li><li>拷贝 <strong>%OPENCV_BUILD_DIR%/install/x64/vc17/bin/*.dll</strong> 到 Windows 的 <strong>%PATH%</strong> 目录 或者 <strong>%PYTHON_PATH%/Scripts</strong> 目录</li><li>重新安装 <strong>opencv-contrib-python</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>pip uninstall opencv-python opencv-contrib-python
</span></span><span style=display:flex><span><span style=color:#66d9ef>COPY</span> %OPENCV_BUILD_DIR%/lib/python3/cv2.cp310-win_amd64.pyd %PYTHON_PATH%/Lib/site-packages/cv2.cp310-win_amd64.pyd /Y
</span></span><span style=display:flex><span><span style=color:#66d9ef>COPY</span> %OPENCV_BUILD_DIR%/install/x64/vc17/bin/*.dll %PYTHON_PATH%/Scripts /Y
</span></span><span style=display:flex><span>pip install opencv-contrib-python
</span></span></code></pre></div><h1 id=测试-opencv>测试 OpenCV</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>python -c <span style=color:#e6db74>&#34;import cv2; print(cv2.__version__); print(cv2.cuda.getCudaEnabledDeviceCount())&#34;</span>
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2021/09/17/css-layout.html title=记一些常用的CSS布局方式 itemprop=url>记一些常用的CSS布局方式</a></h1><p class=article-time><time datetime="2021-09-17 23:22:14 +0800 +0800" itemprop=datePublished>2021-09-17</time></p></header><div class=article-content><h1 id=内容部分占满页面的剩余高度>内容部分占满页面的剩余高度</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>http-equiv</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;X-UA-Compatible&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IE=edge&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>title</span>&gt;Dock.Full&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/css&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#f92672>html</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>body</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    #full {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#EFEFEF</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#423F3E</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    #full {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#171010</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>flex</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>flex-direction</span>: <span style=color:#66d9ef>column</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    #someid {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#362222</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>flex-grow</span>: <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;full&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;header&#34;</span>&gt;Dock.Top&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;someid&#34;</span>&gt;Dock.Full&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p><a href=https://codepen.io/leaker/pen/VwWQPwV>线上预览</a></p><h1 id=登录框居中显示>登录框居中显示</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>http-equiv</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;X-UA-Compatible&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IE=edge&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>title</span>&gt;Document&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/css&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#f92672>html</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>body</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    #parent {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#EFEFEF</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#423F3E</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    #parent {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#171010</span>;
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* 使用Flex布局 */</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>flex</span>;
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* 主轴位于中间 */</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>justify-content</span>: <span style=color:#66d9ef>center</span>;
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* 交叉轴位于中间 */</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>align-items</span>: <span style=color:#66d9ef>center</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    #someid {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>background-color</span>: <span style=color:#ae81ff>#362222</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>200</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>200</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;parent&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;someid&#34;</span>&gt;Dialog Content&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p><a href=https://codepen.io/leaker/pen/gORvGWd>线上预览</a></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/html.html>Html</a>
<a href=/tags/css.html>Css</a>
<a href=/tags/style.html>Style</a>
<a href=/tags/layout.html>Layout</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2016/04/20/adt-add-library-bug.html title=Eclipse-ADT在Windows下添加library的BUG itemprop=url>Eclipse-ADT在Windows下添加library的BUG</a></h1><p class=article-time><time datetime="2016-04-20 18:35:35 +0800 +0800" itemprop=datePublished>2016-04-20</time></p></header><div class=article-content><h1 id=问题出现>问题出现</h1><p>今天在Windows里使用 Cocos-Quick 创建的项目在使用ADT往Android里面部署的时候遇到了下面的问题</p><p><img src=/images/20160420/adt_add_library_bug.webp alt></p><p>出现上图的情况是这样的操作步骤：</p><ol><li>添加 D:\Tools\Quick-Cocos2dx-Community\cocos\platform\android\java 到 Library 引用里</li><li>点击 OK</li><li>重新打开这个配置界面</li></ol><h1 id=问题解决>问题解决</h1><p>测试了许久后，无意间发现有次选错了路径后Library正常了</p><blockquote><p>当时我选择的 Quick 是 ** F:\Quick-Cocos2dx-Community **
选择的项目目录是 ** F:\Code\Cocos\QuickHello **</p></blockquote><p>终于发现了解决这个BUG的办法：*** 将项目和想要引用的Library放在同一个分区内 ***
遂将项目和 Quick 放到同一个分区内后问题解决，效果如下：</p><p><img src=/images/20160420/adt_add_library_bug_ok.webp alt></p><p>引起这个错误的原因是：*** Eclipse 本身并不是给Windows 这种多分区系统定制的，本身是用来给 MAC 或者 Linux 这种以目录为结构的系统使用的 ***</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/12/13/enable-shared-from-this.html title="类 enable_shared_from_this 的经验总结" itemprop=url>类 enable_shared_from_this 的经验总结</a></h1><p class=article-time><time datetime="2015-12-13 23:32:07 +0800 +0800" itemprop=datePublished>2015-12-13</time></p></header><div class=article-content><h1 id=不能再构造函数内使用-shared_from_this-函数>不能再构造函数内使用 shared_from_this() 函数</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    class_a(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>auto</span> <span style=color:#a6e22e>self</span>(shared_from_this());<span style=color:#75715e>// 这里会报 bad_weak_ptr 错误
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h1 id=子类无法重复继承>子类无法重复继承</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_b</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> class_a, <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>这段代码将无法通过编译。
如果想返回子类的 shared_from_this 指针，则可以进行如下操作</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>enable_shared_from_this<span style=color:#f92672>&lt;</span>class_a<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>virtual</span> <span style=color:#f92672>~</span>class_a()<span style=color:#75715e>// 为了确保 dynamic_pointer_cast 可以工作，需要父类拥有虚函数。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {}
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>class_b</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> class_a
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>shared_ptr<span style=color:#f92672>&lt;</span>class_b<span style=color:#f92672>&gt;</span> shared_from_this(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> std<span style=color:#f92672>::</span>dynamic_pointer_cast<span style=color:#f92672>&lt;</span>class_b<span style=color:#f92672>&gt;</span>(class_a<span style=color:#f92672>::</span>shared_from_this());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p><strong>通常来说如果定义一个类时，如果这个类可能被继承使用时，将这个类的析构函数定义为虚函数来确保析构的调用顺序</strong></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/c++.html>C++</a>
<a href=/tags/enable_shared_from_this.html>Enable_shared_from_this</a>
<a href=/tags/shared_ptr.html>Shared_ptr</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/09/14/vs2013-build-openssl-static.html title=VS2013静态编译openssl批处理 itemprop=url>VS2013静态编译openssl批处理</a></h1><p class=article-time><time datetime="2015-09-14 12:26:46 +0800 +0800" itemprop=datePublished>2015-09-14</time></p></header><div class=article-content><h1 id=打开-visual-studio-2013-command-prompt>打开 Visual Studio 2013 Command Prompt</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget http://www.nasm.us/pub/nasm/releasebuilds/2.11.08/win32/nasm-2.11.08-win32.zip
</span></span><span style=display:flex><span>unzip nasm-2.11.08-win32.zip -d C:/nasm
</span></span><span style=display:flex><span>set PATH<span style=color:#f92672>=</span>%PATH%;C:/nasm/
</span></span><span style=display:flex><span>wget https://www.openssl.org/source/openssl-1.0.2d.tar.gz
</span></span><span style=display:flex><span>tar xzf openssl-1.0.2d.tar.gz
</span></span><span style=display:flex><span>cd openssl-1.0.2d
</span></span><span style=display:flex><span>perl configure VC-WIN32 --prefix<span style=color:#f92672>=</span>C:/openssl
</span></span><span style=display:flex><span>ms<span style=color:#ae81ff>\d</span>o_nasm
</span></span><span style=display:flex><span>nmake -f ms<span style=color:#ae81ff>\n</span>t.mak
</span></span><span style=display:flex><span>nmake -f ms<span style=color:#ae81ff>\n</span>t.mak install
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;build successed.&#34;</span>
</span></span></code></pre></div><p>这样编译不会产生 <strong>error A2070:invalid instruction operands</strong> 这个错误</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/nasm.html>Nasm</a>
<a href=/tags/openssl.html>Openssl</a>
<a href=/tags/a2070.html>A2070</a>
<a href=/tags/nmake.html>Nmake</a>
<a href=/tags/perl.html>Perl</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2015/02/09/fix-std-max-error.html title=VS里std::max和max宏混淆问题的解决方案 itemprop=url>VS里std::max和max宏混淆问题的解决方案</a></h1><p class=article-time><time datetime="2015-02-09 11:27:16 +0800 +0800" itemprop=datePublished>2015-02-09</time></p></header><div class=article-content><p>有时,把旧项目转换成新版本项目时,旧版本项目里使用的 <strong>max</strong> 和 <strong>min</strong> 宏无法在新版本中正常编译.</p><p>原因是: 新版本内有了新的函数 <strong>std::max</strong> 和 <strong>std::min</strong> 函数来实现这一功能</p><h4 id=这时可以尝试使用如下方案解决>这时可以尝试使用如下方案解决:</h4><ol><li>包含algorithm文件</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div><ol start=2><li>明确使用 <strong>std::max(a,b)</strong> 而非 <strong>max(a,b)</strong></li><li>定义宏 NOMINMAX</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define NOMINMAX
</span></span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>Programing</a></div><div class=article-tags><span></span>
<a href=/tags/algorithm.html>Algorithm</a>
<a href=/tags/max.html>Max</a>
<a href=/tags/min.html>Min</a>
<a href=/tags/std.html>Std</a></div></div></footer></article><nav id=page-nav class=clearfix><a class="page-number current" aria-label="Page 1" role=button>1</a>
<a class=page-number href=/categories/programing/page/2.html aria-label="Page 2" role=button>2</a>
<a class=page-number href=/categories/programing/page/3.html aria-label="Page 3" role=button>3</a>
<a class="extend last" aria-label=Last rel=last role=button href=/categories/programing/page/3.html>尾页<span></span></a>
<a class="extend next" aria-label=Next rel=next role=button href=/categories/programing/page/2.html>下一页<span></span></a></nav></div><div id=asidepart><aside class=clearfix><p class=asidetitle>文章分类</p><div class=categorieslist><ul><li><a href=/categories/deploy.html title=deploy><div><span class=count>1</span>
<span class=title>deploy</span></div></a></li><li><a href=/categories/interesting.html title=interesting><div><span class=count>1</span>
<span class=title>interesting</span></div></a></li><li><a href=/categories/linux.html title=linux><div><span class=count>29</span>
<span class=title>linux</span></div></a></li><li><a href=/categories/notices.html title=notices><div><span class=count>6</span>
<span class=title>notices</span></div></a></li><li><a href=/categories/programing.html title=programing><div><span class=count>28</span>
<span class=title>programing</span></div></a></li><li><a href=/categories/sites.html title=sites><div><span class=count>1</span>
<span class=title>sites</span></div></a></li><li><a href=/categories/summarys.html title=summarys><div><span class=count>10</span>
<span class=title>summarys</span></div></a></li><li><a href=/categories/works.html title=works><div><span class=count>2</span>
<span class=title>works</span></div></a></li></ul></div></aside><aside class=clearfix><p class=asidetitle>文章标签</p><div class=tagslist><ul class=clearfix><li><a href=/tags/c.html title=c>c<sup>3</sup></a></li><li><a href=/tags/centos.html title=centos>centos<sup>5</sup></a></li><li><a href=/tags/compress.html title=compress>compress<sup>2</sup></a></li><li><a href=/tags/conf.html title=conf>conf<sup>2</sup></a></li><li><a href=/tags/css.html title=css>css<sup>2</sup></a></li><li><a href=/tags/gcc.html title=gcc>gcc<sup>2</sup></a></li><li><a href=/tags/git.html title=git>git<sup>3</sup></a></li><li><a href=/tags/html.html title=html>html<sup>2</sup></a></li><li><a href=/tags/https.html title=https>https<sup>2</sup></a></li><li><a href=/tags/hugo.html title=hugo>hugo<sup>2</sup></a></li><li><a href=/tags/install.html title=install>install<sup>4</sup></a></li><li><a href=/tags/kernel.html title=kernel>kernel<sup>3</sup></a></li><li><a href=/tags/layout.html title=layout>layout<sup>2</sup></a></li><li><a href=/tags/libc.html title=libc>libc<sup>2</sup></a></li><li><a href=/tags/linux.html title=linux>linux<sup>12</sup></a></li><li><a href=/tags/ln.html title=ln>ln<sup>2</sup></a></li><li><a href=/tags/make.html title=make>make<sup>3</sup></a></li><li><a href=/tags/mud.html title=mud>mud<sup>2</sup></a></li><li><a href=/tags/python.html title=python>python<sup>3</sup></a></li><li><a href=/tags/safeseh.html title=safeseh>safeseh<sup>2</sup></a></li><li><a href=/tags/style.html title=style>style<sup>2</sup></a></li><li><a href=/tags/sudo.html title=sudo>sudo<sup>2</sup></a></li><li><a href=/tags/ubuntu.html title=ubuntu>ubuntu<sup>8</sup></a></li><li><a href=/tags/windows.html title=windows>windows<sup>4</sup></a></li><li><a href=/tags/yum.html title=yum>yum<sup>4</sup></a></li><li><a href=/tags/zlib.html title=zlib>zlib<sup>4</sup></a></li></ul></div></aside><div class=rsspart><a href=/atom.xml class=btn target=_blank title=rss>RSS 订阅</a></div></div></div><footer><div id=footer><div class=line><div class=author></div></div><section class=info><p>Hello, this is leaker's blog in github.<br>Leaker: "Living without an aim is like sailing without a compass."</p></section><div class=social-font class=clearfix><a href=mailto:admin@leelib.com target=_blank class=icon-email title="Email Me"></a></div><p class=copyright>Powered by <a rel=noopener title=Hugo href=https://gohugo.io target=_blank>Hugo</a> and Theme by <a rel=noopener title=Fika href=https://github.com/leaker/hugo-theme-fika target=_blank>Fika</a> © 2022
<a href=/about/index.html target=_blank title=leaker>leaker</a></p></div></footer></body></html>