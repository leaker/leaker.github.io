<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Posts"><meta property="og:site_name" content="逃避虽然可耻但有用"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="0001-01-01T00:00:00+0000"><meta property="article:modified_time" content="2022-10-12T20:45:05+0800"><title>Posts | 逃避虽然可耻但有用</title><link rel=alternate type=application/rss+xml href=https://www.leelib.com/posts/atom.xml title=逃避虽然可耻但有用><link rel=stylesheet href=/css/fika.min.23ede50e7ab17b71b8576c52951b006e2dc5d1b0a7e7e1f6c15c57ffa234afd3.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon></head><body><header><div><div id=imglogo><a href=https://www.leelib.com/><img src=/img/logo.webp alt=逃避虽然可耻但有用 title=逃避虽然可耻但有用></a></div><div id=textlogo><h1 class=site-name><a href=/ title=逃避虽然可耻但有用>逃避虽然可耻但有用</a></h1><h2 class=blog-motto>少壮不努力，一生在内地</h2></div><nav class=animated><ul><li><a href=/>主页</a></li><li><a href=/archives/index.html>归档</a></li><li><a href=/about/index.html>关于</a></li><li><a href=/disappear/index.html>消失</a></li></ul></nav></div></header><div id=container><div id=main><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/03/17/back-ubuntu-12-desktop-gnome.html title="让ubuntu 12 desktop版本回归Gnome桌面" itemprop=url>让ubuntu 12 desktop版本回归Gnome桌面</a></h1><p class=article-time><time datetime="2013-03-17 18:55:21 +0800 +0800" itemprop=datePublished>2013-03-17</time></p></header><div class=article-content><p>由于ubuntu 12.04默认采用了Unity界面，对于我这种菜鸟来说用起来很是不顺手，所以搜了一下，发现有办法回归gnome界面。</p><h1 id=安装>安装</h1><p>在此记录下供自己以及还不了解这个解决办法的人使用。</p><ol><li>命令行的解决办法：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install gnome-session-fallback
</span></span></code></pre></div><ol start=2><li>去软件中心搜索“gnome-panel”并安装之</li></ol><h1 id=设置>设置</h1><p>下面就是设置了，登出当前用户后进行以下步骤：</p><ol><li>在登录用户界面选用户名右边的配置按钮
<img src=/wp-content/uploads/2013/03/login1.webp alt=gnome设置第一步></li><li>选择“GNOME Classic”
<img src=/wp-content/uploads/2013/03/login2.webp alt=gnome设置第二步></li></ol><p>现在，输入密码登录看看，是不是已经是熟悉的gnome界面了呢。至此，打完收工。
(o≖◡≖)</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/desktop.html>desktop</a>
<a href=/tags/gnome.html>gnome</a>
<a href=/tags/ubuntu.html>ubuntu</a>
<a href=/tags/unity.html>unity</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2013/03/15/no-repeat-random-num.html title=生成不重复的随机数 itemprop=url>生成不重复的随机数</a></h1><p class=article-time><time datetime="2013-03-15 13:47:47 +0800 +0800" itemprop=datePublished>2013-03-15</time></p></header><div class=article-content><h1 id=下面代码就可以生成1-100区间的随机数>下面代码就可以生成1-100区间的随机数：</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithms&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> random_numbers;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span>; <span style=color:#f92672>++</span>i)
</span></span><span style=display:flex><span>    random_numbers.push_back(i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>std<span style=color:#f92672>::</span>random_shuffle(random_numbers.begin(), random_numbers.end());
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/algorithms.html>algorithms</a>
<a href=/tags/random_shuffle.html>random_shuffle</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/10/21/fix-vmware-win7-no-netcard.html title=VMware装Win7时网卡驱动问题处理 itemprop=url>VMware装Win7时网卡驱动问题处理</a></h1><p class=article-time><time datetime="2012-10-21 10:27:59 +0800 +0800" itemprop=datePublished>2012-10-21</time></p></header><div class=article-content><ol><li><p>用文本编辑器打开虚拟机的vmx文件 例如：Win7.vmx</p></li><li><p>解决方法是在文本最后加入如下信息：</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ethernet0.virtualDev = &#34;e1000&#34;
</span></span></code></pre></div><p><strong>记得要先关闭虚拟机哦！</strong></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/summarys.html>summarys</a></div><div class=article-tags><span></span></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/06/03/use-regex.html title=正则表达式一句话经验 itemprop=url>正则表达式一句话经验</a></h1><p class=article-time><time datetime="2012-06-03 16:00:24 +0800 +0800" itemprop=datePublished>2012-06-03</time></p></header><div class=article-content><h2 id=在正则表达式里想要匹配多行>在正则表达式里想要匹配多行：</h2><p><strong>([\s\S]*)</strong></p><h2 id=想要匹配到到一定区域内的内容可以考虑非贪婪匹配>想要匹配到到一定区域内的内容可以考虑非贪婪匹配:</h2><blockquote><p>例如想要匹配 “<strong>&lt;object name=&lsquo;暗黑3&rsquo; size=&lsquo;12&rsquo;>&lt;/object></strong>” 中的name值“<strong>暗黑3</strong>”</p></blockquote><p>要使用表达式“<strong>&lt;object name=&rsquo;(.+?)&rsquo;</strong>” (非贪婪匹配)
而不能使用“<strong>&lt;object name=&rsquo;(.+)&rsquo;</strong>” (贪婪匹配)。因为这个表达式会匹配出这样的结果“<strong>暗黑3&rsquo; size=&lsquo;12</strong>”，这并不是我们想要的。</p><hr><h1 id=简单描述下贪婪匹配和非贪婪匹配>简单描述下贪婪匹配和非贪婪匹配：</h1><h2 id=例如针对字符串leeeeleeeel>例如：针对字符串“<strong>LeeeeLeeeeL</strong>”</h2><blockquote><p>贪婪模式：</p></blockquote><p>(L)(\w+) &ldquo;\w+&rdquo; 将匹配第一个"L"之后的所有字符。结果：&ldquo;eeeeLeeeeL&rdquo;
(L)(\w+)(L) &ldquo;\w+&rdquo; 将匹配第一个"L"和最后一个"L"之间的所有字符。结果：&ldquo;eeeeLeeee&rdquo;</p><blockquote><p>非贪婪模式：</p></blockquote><p>(L)(\w+?) &ldquo;\w+?&rdquo; 将尽可能少的匹配第一个"L"之后的字符。结果：&ldquo;e&rdquo;
(L)(\w+?)(L) &ldquo;\w+?&rdquo; 将匹配以第一个"L"开头以第二个"L"结尾的字符。结果：&ldquo;eee&rdquo;</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/summarys.html>summarys</a></div><div class=article-tags><span></span>
<a href=/tags/regex.html>regex</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/05/24/fix-ubuntu-start-dante-error.html title=解决ubuntu下dante不能正常启动的问题 itemprop=url>解决ubuntu下dante不能正常启动的问题</a></h1><p class=article-time><time datetime="2012-05-24 06:36:37 +0800 +0800" itemprop=datePublished>2012-05-24</time></p></header><div class=article-content><p>首先查看日志文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu<span style=color:#f92672>]</span><span style=color:#75715e># cat /var/log/danted.log</span>
</span></span></code></pre></div><p>发现里面有这样的记录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>May 24 13:57:52 (1337839072) danted[13596]: socks_seteuid(): old: 0, new: 65534
</span></span><span style=display:flex><span>May 24 13:57:52 (1337839072) danted[13596]: socks_reseteuid(): current: 65534, new: 0
</span></span><span style=display:flex><span>May 24 13:57:52 (1337839072) danted[13596]: fixsettings(): setting the libwrap uid to 0 is not recommended
</span></span><span style=display:flex><span>May 24 13:57:52 (1337839072) danted[13596]: symbolfunction(): compiletime configuration error? Failed to open &#34;libc.so&#34;: /usr/lib/i386-linux-gnu/libc.so: invalid ELF header
</span></span></code></pre></div><p>说明程序在找/usr/lib/i386-linux-gnu/libc.so位置的libc.so没找到，所以解决办法就是创建一个链接命令如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ln -sf /lib/i386-linux-gnu/libc.so.6 /usr/lib/i386-linux-gnu/libc.so
</span></span></code></pre></div><p>再启动下服务</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>service danted start
</span></span></code></pre></div><p>看看是不是启动成功啦！
(o≖◡≖)</p><p>因为到现在位置在国内没有搜索到这个问题的解决办法，所以记录在这里。或许能帮到有需要的人。</p><p>另外，这里有dante socks server的安装说明：
<a href=http://wiki.kartbuilding.net/index.php/Dante_Socks_Server>http://wiki.kartbuilding.net/index.php/Dante_Socks_Server</a></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/dante.html>dante</a>
<a href=/tags/danted.html>danted</a>
<a href=/tags/libc.html>libc</a>
<a href=/tags/ubuntu.html>ubuntu</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/05/16/cmake-use-relative-path.html title=使CMake生成工程采用相对路径 itemprop=url>使CMake生成工程采用相对路径</a></h1><p class=article-time><time datetime="2012-05-16 03:18:15 +0800 +0800" itemprop=datePublished>2012-05-16</time></p></header><div class=article-content><p><img src=/wp-content/uploads/2012/05/cmake_ogre.webp#center alt=cmake></p><h1 id=解决方案>解决方案</h1><p>在生成项目之前勾选上 <strong>CMAKE_USE_RELATIVE_PATHS</strong> 这个选项，效果如上图所示。</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/cmake.html>cmake</a>
<a href=/tags/ogre.html>ogre</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/04/25/redhat-use-centos-yum.html title=让RedHat系统使用CentOS的yum itemprop=url>让RedHat系统使用CentOS的yum</a></h1><p class=article-time><time datetime="2012-04-25 10:04:10 +0800 +0800" itemprop=datePublished>2012-04-25</time></p></header><div class=article-content><p><img src=/wp-content/uploads/2012/04/redhat.webp#center alt=redhat></p><h1 id=错误原因>错误原因</h1><p>在使用未注册的 RedHat Linux 企业版时。使用yum命令会出现如下提示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@localhost ~<span style=color:#f92672>]</span><span style=color:#75715e># yum install httpd</span>
</span></span><span style=display:flex><span>Loaded plugins: rhnplugin, security
</span></span><span style=display:flex><span>This system is not registered with RHN.
</span></span><span style=display:flex><span>RHN support will be disabled.
</span></span><span style=display:flex><span>Setting up Install Process
</span></span><span style=display:flex><span>No package httpd available.
</span></span><span style=display:flex><span>Nothing to <span style=color:#66d9ef>do</span>
</span></span></code></pre></div><h1 id=解决方案>解决方案</h1><p>而这种情况可以使用CentOS的yum来代替掉系统本身的yum
脚本如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>rpm -qa | grep yum | xargs rpm -e --nodeps
</span></span><span style=display:flex><span>wget  http://centos.ustc.edu.cn/centos/5/os/i386/CentOS/yum-metadata-parser-1.1.2-3.el5.centos.i386.rpm
</span></span><span style=display:flex><span>wget  http://mirrors.ustc.edu.cn/centos/5/os/i386/CentOS/yum-fastestmirror-1.1.16-21.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>wget  http://mirrors.ustc.edu.cn/centos/5/os/i386/CentOS/yum-3.2.22-39.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>rpm -ivh yum-metadata-parser-1.1.2-3.el5.centos.i386.rpm
</span></span><span style=display:flex><span>rpm -ivh yum-fastestmirror-1.1.16-21.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>rpm -ivh yum-3.2.22-39.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>wget http://docs.linuxtone.org/soft/lemp/CentOS-Base.repo
</span></span><span style=display:flex><span>mv CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo
</span></span><span style=display:flex><span>rm -f yum-metadata-parser-1.1.2-3.el5.centos.i386.rpm
</span></span><span style=display:flex><span>rm -f yum-fastestmirror-1.1.16-21.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>rm -f yum-3.2.22-39.el5.centos.noarch.rpm
</span></span><span style=display:flex><span>rm -f CentOS-Base.repo
</span></span></code></pre></div><p>将上面的脚本保存为：<strong>redhat_use_centos_yum.sh</strong></p><p>点击这里直接下载 <a href=/wp-content/uploads/2012/04/redhat_use_centos_yum.sh>redhat_use_centos_yum.sh</a>
然后直接运行这个脚本即可。</p><h1 id=一键脚本>一键脚本</h1><p>如果闲麻烦也可以依次输入下面几条指令来下载并执行我已经写好的脚本，同样可以达到目的：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget http://www.leelib.com/wp-content/uploads/2012/04/redhat_use_centos_yum.sh
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>777</span> redhat_use_centos_yum.sh
</span></span><span style=display:flex><span>sudo ./redhat_use_centos_yum.sh
</span></span></code></pre></div><p>现在再试试yum命令是否已经没有了 This system is not registered with RHN. 提示，并且可以正常使用了呢！ :)</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/linux.html>linux</a></div><div class=article-tags><span></span>
<a href=/tags/centos.html>centos</a>
<a href=/tags/redhat.html>redhat</a>
<a href=/tags/sh.html>sh</a>
<a href=/tags/shell.html>shell</a>
<a href=/tags/yum.html>yum</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/04/24/asm-rol-to-c.html title=汇编中ROL(循环左移)对应的C语言实现 itemprop=url>汇编中ROL(循环左移)对应的C语言实现</a></h1><p class=article-time><time datetime="2012-04-24 10:48:29 +0800 +0800" itemprop=datePublished>2012-04-24</time></p></header><div class=article-content><p>在汇编语言中，我们可以直接使用ROL ROR等指令进行循环左移和循环右移的操作。
但C语言中却没有对应的操作，没办法只能自己实现了。</p><h2 id=下面是我最近项目中用到的一个针对word类型的循环左移rol实现代码>下面是我最近项目中用到的一个针对WORD类型的循环左移(ROL)实现代码：</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>uint16_t</span> <span style=color:#a6e22e>ROL</span>(<span style=color:#66d9ef>int</span> val, <span style=color:#66d9ef>int</span> n)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (val <span style=color:#f92672>&lt;&lt;</span> n) <span style=color:#f92672>|</span> (val <span style=color:#f92672>&gt;&gt;</span> (<span style=color:#ae81ff>16</span> <span style=color:#f92672>-</span> n));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>针对BYTE类型的循环左移：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>uint8_t</span> <span style=color:#a6e22e>ROL</span>(<span style=color:#66d9ef>int</span> val, <span style=color:#66d9ef>int</span> n)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (val <span style=color:#f92672>&lt;&lt;</span> n) <span style=color:#f92672>|</span> (val <span style=color:#f92672>&gt;&gt;</span> (<span style=color:#ae81ff>8</span> <span style=color:#f92672>-</span> n));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>针对DWORD类型的循环左移：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>uint32_t</span> <span style=color:#a6e22e>ROL</span>(<span style=color:#66d9ef>int</span> val, <span style=color:#66d9ef>int</span> n)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (val <span style=color:#f92672>&lt;&lt;</span> n) <span style=color:#f92672>|</span> (val <span style=color:#f92672>&gt;&gt;</span> (<span style=color:#ae81ff>32</span> <span style=color:#f92672>-</span> n));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/rol.html>ROL</a>
<a href=/tags/ror.html>ROR</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/04/12/convert-m8-contacts-xml-to-andriod-vcf.html title=将M8导出的联系人XML转化成Andriod可以导入的vcf文件 itemprop=url>将M8导出的联系人XML转化成Andriod可以导入的vcf文件</a></h1><p class=article-time><time datetime="2012-04-12 09:27:17 +0800 +0800" itemprop=datePublished>2012-04-12</time></p></header><div class=article-content><p><img src=/wp-content/uploads/2012/04/android.webp#center alt=android>
通过我写的一段Python代码可以让M8用户将联系人导入到Andriod系统中。</p><h2 id=操作需要以下步骤>操作需要以下步骤：</h2><ol><li>先用M8PC工具将M8的联系人导出成XML格式。</li><li>将导出的文件重命名为mycontact.xml，并与m8toAndriod.py放到同一目录下</li><li>运行 python m8toAndriod.py 程序会生成一个名为 mycontact.vcf 的文件</li><li>将 mycontact.vcf 传到Andriod手机中导入</li></ol><h2 id=以下为-m8toandriodpy-的代码>以下为 m8toAndriod.py 的代码：</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python</span>
</span></span><span style=display:flex><span><span style=color:#75715e># coding: utf-8</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 功能：将M8导出的联系人XML转化成Andriod可以导入的vcf文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 版本：python 2.6 以上</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 作者：leaker</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 网站：http://www.leelib.com</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> xml.etree <span style=color:#f92672>import</span> ElementTree <span style=color:#66d9ef>as</span> ET
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出到的mycontact.vcf</span>
</span></span><span style=display:flex><span>out <span style=color:#f92672>=</span> file(<span style=color:#e6db74>&#34;mycontact.vcf&#34;</span>, <span style=color:#e6db74>&#34;wb&#34;</span>)
</span></span><span style=display:flex><span>root <span style=color:#f92672>=</span> ET<span style=color:#f92672>.</span>parse(file(<span style=color:#e6db74>&#34;mycontact.xml&#34;</span>, <span style=color:#e6db74>&#34;r&#34;</span>))<span style=color:#f92672>.</span>getroot()
</span></span><span style=display:flex><span>print root
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> e <span style=color:#f92672>in</span> root<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>&#39;Person&#39;</span>):
</span></span><span style=display:flex><span>    out<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;BEGIN:VCARDrnVERSION:3.0rn&#39;</span>)
</span></span><span style=display:flex><span>    out<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;N:</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>;;;rn&#39;</span> <span style=color:#f92672>%</span> (e<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;LastName&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf8&#39;</span>), e<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;FirstName&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf8&#39;</span>)))
</span></span><span style=display:flex><span>    out<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;FN:</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>rn&#39;</span> <span style=color:#f92672>%</span> (e<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;FileAs&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf8&#39;</span>)))
</span></span><span style=display:flex><span>    <span style=color:#75715e># print &#39;FN:%srn&#39;% (e.findtext(&#39;FileAs&#39;, &#39;&#39;).encode(&#39;gb2312&#39;))</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ee <span style=color:#f92672>in</span> root<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>&#39;Phone&#39;</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> ee<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;PersonID&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#f92672>==</span> e<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;ID&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>):
</span></span><span style=display:flex><span>            primary <span style=color:#f92672>=</span> ee<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;IsPrimary&#39;</span>) <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;true&#39;</span>
</span></span><span style=display:flex><span>            out<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;TEL;TYPE=CELL</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>:</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>rn&#39;</span> <span style=color:#f92672>%</span> ((<span style=color:#e6db74>&#39;;TYPE=PREF&#39;</span> <span style=color:#66d9ef>if</span> primary <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#39;&#39;</span>), ee<span style=color:#f92672>.</span>findtext(<span style=color:#e6db74>&#39;Info&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>)))
</span></span><span style=display:flex><span>    out<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#39;END:VCARDrn&#39;</span>)
</span></span><span style=display:flex><span>out<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><p>点击这里下载：<a href=/wp-content/uploads/2012/04/m8toAndriod.7z>m8toAndriod.7z</a></p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/programing.html>programing</a></div><div class=article-tags><span></span>
<a href=/tags/andriod.html>Andriod</a>
<a href=/tags/m8.html>m8</a>
<a href=/tags/m8toandriod.html>m8toAndriod</a>
<a href=/tags/python.html>python</a>
<a href=/tags/xml.html>XML</a></div></div></footer></article><article class="post-expand post" itemprop=articleBody><header class="article-info clearfix"><h1 itemprop=name><a href=/2012/04/07/fix-win7-vs2010-no-recents.html title=解决Win7下VS2010不保存“最近使用的项目和解决方案”问题 itemprop=url>解决Win7下VS2010不保存“最近使用的项目和解决方案”问题</a></h1><p class=article-time><time datetime="2012-04-07 06:39:59 +0800 +0800" itemprop=datePublished>2012-04-07</time></p></header><div class=article-content><p><img src=/wp-content/uploads/2012/04/VS2010StartPage.webp#center alt=VS2010></p><p>最近因为一些原因开始使用Win7 x64系统。
而使用VS2010的时候发现文件菜单里面竟然没有 <strong>最近使用的项目和解决方案</strong> 这一项。</p><p>于是网上搜索了半天发现是因为Win7系统中 <strong>组策略-用户配置-管理模板-开始菜单和任务栏</strong> 里面的：</p><blockquote><p>退出系统时清理最近打开文档的历史
不保留最近打开文档的历史</p></blockquote><p>这两项未配置的时候默认是 <strong>启用</strong>
所以我们只要将这两项设置为 <strong>已禁用</strong> 就可以了。</p><p>希望能帮助到跟我有同样问题的人 :)</p></div><footer class="article-footer clearfix"><div class=article-catetags><div class=article-categories><span></span>
<a class=article-category-link href=/categories/summarys.html>summarys</a></div><div class=article-tags><span></span>
<a href=/tags/vs2010.html>VS2010</a>
<a href=/tags/win7.html>Win7</a></div></div></footer></article><nav id=page-nav class=clearfix><a class="extend first" aria-label=First rel=first role=button href=/posts.html><span></span>首页</a>
<a class="extend prev" aria-label=Prev rel=prev role=button href=/posts/page/6.html><span></span>上一页</a>
<span>...</span>
<a class=page-number href=/posts/page/2.html aria-label="Page 2" role=button>2</a>
<a class=page-number href=/posts/page/3.html aria-label="Page 3" role=button>3</a>
<a class=page-number href=/posts/page/4.html aria-label="Page 4" role=button>4</a>
<a class=page-number href=/posts/page/5.html aria-label="Page 5" role=button>5</a>
<a class=page-number href=/posts/page/6.html aria-label="Page 6" role=button>6</a>
<a class="page-number current" aria-label="Page 7" role=button>7</a>
<a class=page-number href=/posts/page/8.html aria-label="Page 8" role=button>8</a>
<a class="extend last" aria-label=Last rel=last role=button href=/posts/page/8.html>尾页<span></span></a>
<a class="extend next" aria-label=Next rel=next role=button href=/posts/page/8.html>下一页<span></span></a></nav></div><div id=asidepart><aside class=clearfix><p class=asidetitle>文章分类</p><div class=categorieslist><ul><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/deploy.html title=deploy>deploy</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/interesting.html title=interesting>interesting</a></li><li><span class=count>29</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/linux.html title=linux>linux</a></li><li><span class=count>6</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/notices.html title=notices>notices</a></li><li><span class=count>25</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/programing.html title=programing>programing</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/sites.html title=sites>sites</a></li><li><span class=count>10</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/summarys.html title=summarys>summarys</a></li><li><span class=count>1</span><svg aria-label="Directory" aria-hidden="true" height="16" viewBox="0 0 16 16" width="16" data-view-component="true" class="octicon mr-3"><path d="M1.75 1A1.75 1.75.0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75.0 0016 13.25v-8.5A1.75 1.75.0 0014.25 3H7.5a.25.25.0 01-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75z"/></svg>
<a href=/categories/works.html title=works>works</a></li></ul></div></aside><aside class=clearfix><p class=asidetitle>文章标签</p><div class=tagslist><ul class=clearfix><li><a href=/tags/c.html title=c>c<sup>3</sup></a></li><li><a href=/tags/centos.html title=centos>centos<sup>5</sup></a></li><li><a href=/tags/compress.html title=compress>compress<sup>2</sup></a></li><li><a href=/tags/conf.html title=conf>conf<sup>2</sup></a></li><li><a href=/tags/css.html title=css>css<sup>2</sup></a></li><li><a href=/tags/gcc.html title=gcc>gcc<sup>2</sup></a></li><li><a href=/tags/git.html title=git>git<sup>3</sup></a></li><li><a href=/tags/html.html title=html>html<sup>2</sup></a></li><li><a href=/tags/https.html title=https>https<sup>2</sup></a></li><li><a href=/tags/hugo.html title=hugo>hugo<sup>2</sup></a></li><li><a href=/tags/install.html title=install>install<sup>4</sup></a></li><li><a href=/tags/kernel.html title=kernel>kernel<sup>3</sup></a></li><li><a href=/tags/layout.html title=layout>layout<sup>2</sup></a></li><li><a href=/tags/libc.html title=libc>libc<sup>2</sup></a></li><li><a href=/tags/linux.html title=linux>linux<sup>12</sup></a></li><li><a href=/tags/ln.html title=ln>ln<sup>2</sup></a></li><li><a href=/tags/make.html title=make>make<sup>3</sup></a></li><li><a href=/tags/python.html title=python>python<sup>3</sup></a></li><li><a href=/tags/safeseh.html title=safeseh>safeseh<sup>2</sup></a></li><li><a href=/tags/style.html title=style>style<sup>2</sup></a></li><li><a href=/tags/sudo.html title=sudo>sudo<sup>2</sup></a></li><li><a href=/tags/ubuntu.html title=ubuntu>ubuntu<sup>8</sup></a></li><li><a href=/tags/windows.html title=windows>windows<sup>3</sup></a></li><li><a href=/tags/yum.html title=yum>yum<sup>4</sup></a></li><li><a href=/tags/zlib.html title=zlib>zlib<sup>4</sup></a></li></ul></div></aside><div class=rsspart><a href=/atom.xml class=btn target=_blank title=rss>RSS 订阅</a></div></div></div><footer><div id=footer><div class=line><div class=author></div></div><section class=info><p>Hello, this is leaker's blog in github.<br>Leaker: "Living without an aim is like sailing without a compass."</p></section><div class=social-font class=clearfix><a href=mailto:admin@leelib.com target=_blank class=icon-email title="Email Me"></a></div><p class=copyright>Powered by <a rel=noopener title=Hugo href=https://gohugo.io target=_blank>Hugo</a> and Theme by <a rel=noopener title=Fika href=https://github.com/leaker/hugo-theme-fika target=_blank>Fika</a> © 2022
<a href=/about/index.html target=_blank title=leaker>leaker</a>
<a target=_blank rel="noopener noreferrer" href=http://www.beian.miit.gov.cn/ class=report-link><img rel=nofollow title="备案号： 陕ICP备20006522号" class=report-img src=/images/report-img.webp><span class=report-link-text>陕ICP备20006522号</span></a></p></div></footer></body></html>